import{j as e}from"./index-tBdcIxzk.js";import{r as s}from"./vendor-D_DxLZN2.js";import{D as t}from"./dataService-7pESmbQL.js";import"./router-BPhEMSNK.js";import"./supabase-BMSNwJ-5.js";import"./supabase-DCVaQTjR.js";const r=()=>{const[r,a]=s.useState("30d"),[l,i]=s.useState(null),[n,d]=s.useState(!0);s.useEffect(()=>{(async()=>{try{const[e,s,r,a]=await Promise.all([t.getProfiles(),t.getCourses(),t.getEnrollments(),t.getSessions()]),l=e.filter(e=>"student"===e.role),n=e.filter(e=>"mentor"===e.role),d=l.filter(e=>"active"===e.status),c=r.filter(e=>e.completed_at),x=12e3*r.length,m={overview:{totalUsers:e.length,activeUsers:d.length,courseCompletions:c.length,revenue:x,growth:{users:12.5,revenue:18.3,completions:15.7,engagement:8.9}},userEngagement:[{metric:"Daily Active Users",value:Math.floor(.6*d.length),change:8.5,trend:"up"},{metric:"Average Session Duration",value:"24 min",change:12.3,trend:"up"},{metric:"Course Completion Rate",value:`${Math.round(c.length/r.length*100)}%`,change:-2.1,trend:"down"},{metric:"Student Satisfaction",value:"4.7/5",change:5.2,trend:"up"}],topCourses:s.slice(0,5).map(e=>{const s=r.filter(s=>s.course_id===e.id),t=s.filter(e=>e.completed_at);return{name:e.title,students:s.length,completion:Math.round(t.length/s.length*100)||0,revenue:s.length*e.price,rating:4.5+.5*Math.random()}}),mentorPerformance:n.slice(0,4).map(e=>{const s=a.filter(s=>s.mentor_id===e.id),t=s.filter(e=>"completed"===e.status),r=new Set(s.map(e=>e.student_id)).size;return{name:e.name,rating:4.5+.5*Math.random(),sessions:s.length,students:r,earnings:4e3*t.length}}),revenueBreakdown:[{category:"Course Sales",amount:Math.round(.76*x),percentage:76.3},{category:"Mentorship",amount:Math.round(.16*x),percentage:15.9},{category:"Certifications",amount:Math.round(.05*x),percentage:5.2},{category:"Premium Support",amount:Math.round(.03*x),percentage:2.5}]};i(m)}catch(e){console.error("Error fetching analytics:",e)}finally{d(!1)}})()},[r]);const c=e=>"up"===e?"ri-arrow-up-line text-green-500":"ri-arrow-down-line text-red-500";return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Comprehensive insights into platform performance"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:r,onChange:e=>a(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm cursor-pointer",children:[e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"90d",children:"Last 90 Days"}),e.jsx("option",{value:"1y",children:"Last Year"})]}),e.jsx("i",{className:"ri-arrow-down-s-line absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]})]})}),n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-loader-4-line text-4xl text-gray-400 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading analytics..."})]})}):l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.overview.totalUsers.toLocaleString()}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("i",{className:"ri-arrow-up-line text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm text-green-600",children:["+",l.overview.growth.users,"%"]})]})]}),e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-blue-100 rounded-lg",children:e.jsx("i",{className:"ri-user-line text-2xl text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",l.overview.revenue.toLocaleString()]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("i",{className:"ri-arrow-up-line text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm text-green-600",children:["+",l.overview.growth.revenue,"%"]})]})]}),e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-green-100 rounded-lg",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-2xl text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Course Completions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.overview.courseCompletions.toLocaleString()}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("i",{className:"ri-arrow-up-line text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm text-green-600",children:["+",l.overview.growth.completions,"%"]})]})]}),e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-purple-100 rounded-lg",children:e.jsx("i",{className:"ri-graduation-cap-line text-2xl text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.overview.activeUsers.toLocaleString()}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("i",{className:"ri-arrow-up-line text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm text-green-600",children:["+",l.overview.growth.engagement,"%"]})]})]}),e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-orange-100 rounded-lg",children:e.jsx("i",{className:"ri-pulse-line text-2xl text-orange-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"User Engagement"}),e.jsx("div",{className:"space-y-4",children:l.userEngagement.map((s,t)=>{return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.metric}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:s.value})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center "+(r=s.trend,"up"===r?"text-green-600":"text-red-600"),children:[e.jsx("i",{className:`${c(s.trend)} mr-1`}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(s.change),"%"]})]})})]},t);var r})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Breakdown"}),e.jsx("div",{className:"space-y-4",children:l.revenueBreakdown.map((s,t)=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.category}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${s.percentage}%`}})}),e.jsxs("div",{className:"text-sm font-medium text-gray-900 mt-1",children:["$",s.amount.toLocaleString()]})]})},t))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performing Courses"}),e.jsx("div",{className:"space-y-4",children:l.topCourses.map((s,t)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.students," students enrolled"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["$",s.revenue.toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-star-fill text-yellow-400 mr-1"}),s.rating]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Completion Rate"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${s.completion}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[s.completion,"%"]})]})]})]},t))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Mentor Performance"}),e.jsx("div",{className:"space-y-4",children:l.mentorPerformance.map((s,t)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-green-600 font-medium text-sm",children:s.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-star-fill text-yellow-400 mr-1"}),s.rating]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["â‚¹",s.earnings.toLocaleString()]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Sessions:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:s.sessions})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Students:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:s.students})]})]})]},t))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Traffic Sources"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-blue-100 rounded-lg mx-auto mb-3",children:e.jsx("i",{className:"ri-search-line text-2xl text-blue-600"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"45%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Organic Search"})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-green-100 rounded-lg mx-auto mb-3",children:e.jsx("i",{className:"ri-share-line text-2xl text-green-600"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"28%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Social Media"})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-purple-100 rounded-lg mx-auto mb-3",children:e.jsx("i",{className:"ri-links-line text-2xl text-purple-600"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"18%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Referrals"})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-orange-100 rounded-lg mx-auto mb-3",children:e.jsx("i",{className:"ri-mail-line text-2xl text-orange-600"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"9%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Email Marketing"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Export Reports"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line text-2xl text-green-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Export to Excel"})]}),e.jsxs("button",{className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-pdf-line text-2xl text-red-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Export to PDF"})]}),e.jsxs("button",{className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-bar-chart-box-line text-2xl text-blue-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Custom Report"})]}),e.jsxs("button",{className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-calendar-schedule-line text-2xl text-purple-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Schedule Report"})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-bar-chart-line text-4xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No analytics data available"})]})})]})};export{r as default};
