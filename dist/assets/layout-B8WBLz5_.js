import{j as e}from"./index-tBdcIxzk.js";import{r as s}from"./vendor-D_DxLZN2.js";import{d as t,N as a,L as r,O as i}from"./router-BPhEMSNK.js";import{authService as l}from"./auth-CFgD0Kdo.js";import{u as n,T as d,M as o,N as c,P as m}from"./useSidebar-1GEKfE2y.js";import{T as x}from"./ThemeToggle-BjHrlrFT.js";import"./supabase-BMSNwJ-5.js";import"./supabase-DCVaQTjR.js";import"./Card-CCr5q94u.js";const h=[{name:"Dashboard",href:"/student/dashboard",icon:"ri-dashboard-line"},{name:"My Courses",href:"/student/my-courses",icon:"ri-book-line"},{name:"Continue Learning",href:"/student/continue",icon:"ri-play-circle-line"},{name:"Assessments",href:"/student/assessments",icon:"ri-file-list-line"},{name:"Schedule",href:"/student/schedule",icon:"ri-calendar-line"},{name:"Resume Builder",href:"/student/resume-builder",icon:"ri-file-text-line"},{name:"Achievements",href:"/student/achievements",icon:"ri-trophy-line"},{name:"Job Placements",href:"/student/placements",icon:"ri-briefcase-line"},{name:"Discussions",href:"/student/discussions",icon:"ri-chat-3-line"}];function f(){var f,p;const[u,g]=s.useState(!1),[b,j]=s.useState(null),[v,N]=s.useState(!0),y=t(),{isCollapsed:w,toggleSidebar:k}=n("student-sidebar-collapsed");return s.useEffect(()=>{(async()=>{try{const e=await l.getCurrentUser();if("student"!==(null==e?void 0:e.role))throw new Error("Unauthorized");j(e)}catch(e){console.error("Auth check failed:",e)}finally{N(!1)}})()},[]),v?e.jsx("div",{className:"min-h-screen bg-theme-bg-secondary flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-loader-4-line text-4xl text-brand-primary animate-spin mb-4"}),e.jsx("p",{className:"text-theme-text-secondary",children:"Loading..."})]})}):b?e.jsxs("div",{className:"min-h-screen bg-theme-bg-secondary overflow-x-hidden",children:[e.jsx("div",{className:"hidden lg:fixed lg:top-16 lg:bottom-0 lg:flex lg:flex-col transition-all duration-300 ease-in-out z-30 "+(w?"lg:w-16":"lg:w-64"),children:e.jsxs("div",{className:"flex flex-col flex-grow pt-5 bg-theme-card-bg border-r border-theme-border shadow-sm overflow-hidden overflow-x-hidden glass-dark",children:[e.jsx("div",{className:"px-3 mb-2 "+(w?"px-2":""),children:e.jsx("button",{onClick:k,className:"w-full flex items-center justify-center p-2 text-theme-text-secondary hover:text-brand-primary hover:bg-theme-hover-bg rounded-lg transition-all duration-200",children:e.jsx("i",{className:`ri-${w?"menu-unfold":"menu-fold"}-line text-lg flex justify-center items-center`})})}),e.jsxs("nav",{className:"mt-5 flex-1 flex flex-col divide-y divide-theme-border overflow-y-auto scrollbar-hide",children:[e.jsx("div",{className:"px-3 space-y-1 "+(w?"px-2":""),children:h.map(s=>{const t=y.pathname===s.href,a=e.jsxs(r,{to:s.href,className:`dashboard-nav-item flex items-center w-full px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${t?"bg-gradient-to-r from-purple-600 to-orange-500 text-white shadow-md":"text-theme-text-secondary hover:bg-theme-hover-bg hover:text-brand-primary"} ${w?"justify-center px-2":""}`,children:[e.jsx("i",{className:`${s.icon} text-lg flex-shrink-0 ${w?"flex justify-center items-center":"mr-3"}`}),e.jsx("span",{className:"truncate transition-all duration-300 "+(w?"opacity-0 w-0 overflow-hidden":"opacity-100"),children:s.name})]},s.name);return w?e.jsx("div",{className:"relative block",children:e.jsx(d,{content:s.name,position:"right",children:a})},s.name):e.jsx("div",{className:"relative block",children:a},s.name)})}),e.jsx("div",{className:"px-3 py-4 "+(w?"px-2":""),children:w?e.jsx(d,{content:"Toggle Theme",position:"right",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(x,{variant:"icon-only"})})}):e.jsx(x,{variant:"minimal",size:"sm",showLabel:!0})})]}),e.jsx("div",{className:"flex-shrink-0 p-4 border-t border-theme-border "+(w?"px-2":""),children:e.jsxs("div",{className:"flex items-center "+(w?"justify-center":""),children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"rounded-full bg-gradient-to-r from-purple-600 to-orange-500 flex items-center justify-center text-white font-semibold transition-all duration-300 "+(w?"w-8 h-8 text-xs":"w-10 h-10 text-sm"),children:null==(f=b.name)?void 0:f.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0 transition-all duration-300 "+(w?"opacity-0 w-0 overflow-hidden ml-0":"opacity-100"),children:[e.jsx("p",{className:"text-sm font-medium text-theme-text-primary truncate",children:b.name}),e.jsx("p",{className:"text-xs text-theme-text-tertiary truncate",children:"Student"})]})]})})]})}),e.jsx(o,{isOpen:u,onClose:()=>g(!1),title:"Navigation",children:e.jsxs("div",{className:"px-4 py-6",children:[e.jsx("div",{className:"mb-8",children:e.jsx(r,{to:"/",className:"flex items-center justify-center",children:e.jsx("img",{src:"https://static.readdy.ai/image/9a8f01f834659f0ab66072bb9b6ee657/94d4f47a77f88d2925bb5eae1005561d.png",alt:"DCODE Systems",className:"h-10 w-auto"})})}),e.jsx("nav",{className:"space-y-2",children:h.map(s=>{const t=y.pathname===s.href;return e.jsxs(r,{to:s.href,onClick:()=>g(!1),className:"flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 "+(t?"bg-gradient-to-r from-purple-600 to-orange-500 text-white shadow-md":"text-theme-text-secondary hover:bg-theme-hover-bg hover:text-brand-primary"),children:[e.jsx("i",{className:`${s.icon} mr-3 text-lg flex-shrink-0`}),e.jsx("span",{children:s.name})]},s.name)})}),e.jsx("div",{className:"mt-8 pt-6 border-t border-theme-border",children:e.jsx(x,{variant:"default",size:"md"})}),e.jsx("div",{className:"mt-8 pt-6 border-t border-theme-border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-purple-600 to-orange-500 flex items-center justify-center text-white font-semibold",children:null==(p=b.name)?void 0:p.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-base font-medium text-theme-text-primary",children:b.name}),e.jsx("p",{className:"text-sm text-theme-text-tertiary",children:"Student"})]})]})})]})}),e.jsxs("div",{className:"lg:flex lg:flex-col lg:flex-1 transition-all duration-300 overflow-x-hidden "+(w?"lg:pl-16":"lg:pl-64"),children:[e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-40 flex h-16 flex-shrink-0 items-center gap-x-4 border-b border-theme-border bg-theme-card-bg/95 backdrop-blur-sm px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:pl-24 lg:pr-8",children:[e.jsxs("button",{type:"button",className:"p-2.5 text-theme-text-secondary lg:hidden hover:bg-theme-hover-bg rounded-lg transition-colors duration-200",onClick:()=>g(!0),children:[e.jsx("span",{className:"sr-only",children:"Open sidebar"}),e.jsx("i",{className:"ri-menu-line text-xl"})]}),e.jsx("div",{className:"flex-1 flex justify-center lg:hidden",children:e.jsx(r,{to:"/",className:"flex items-center",children:e.jsx("img",{src:"https://static.readdy.ai/image/9a8f01f834659f0ab66072bb9b6ee657/94d4f47a77f88d2925bb5eae1005561d.png",alt:"DCODE Systems",className:"h-8 w-auto"})})}),e.jsx("div",{className:"h-6 w-px bg-theme-border lg:hidden","aria-hidden":"true"}),e.jsx("div",{className:"hidden lg:flex items-center absolute left-0 top-0 h-16 px-4 z-50",children:e.jsx(r,{to:"/",className:"flex items-center",children:e.jsx("img",{src:"https://static.readdy.ai/image/9a8f01f834659f0ab66072bb9b6ee657/94d4f47a77f88d2925bb5eae1005561d.png",alt:"DCODE Systems",className:"h-10 w-auto"})})}),e.jsxs("div",{className:"hidden lg:flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[e.jsx("div",{className:"flex flex-1"}),e.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[e.jsx(c,{children:e.jsxs("button",{type:"button",className:"-m-2.5 p-2.5 text-theme-text-tertiary hover:text-theme-text-secondary hover:bg-theme-hover-bg rounded-lg transition-colors duration-200",children:[e.jsx("span",{className:"sr-only",children:"View notifications"}),e.jsx("i",{className:"ri-notification-line text-xl"})]})}),e.jsx("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-theme-border","aria-hidden":"true"}),e.jsx(m,{user:b})]})]}),e.jsxs("div",{className:"lg:hidden flex items-center space-x-2",children:[e.jsx(x,{variant:"icon-only"}),e.jsx(m,{user:b})]})]}),e.jsx("main",{className:"flex-1 pt-16 pr-4 lg:pr-6 transition-all duration-300 "+(w?"lg:pl-4":"lg:pl-6"),children:e.jsx(i,{})})]})]}):e.jsx(a,{to:"/auth/signin",replace:!0})}export{f as default};
