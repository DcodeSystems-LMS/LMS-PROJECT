import{j as e}from"./index-tBdcIxzk.js";import{r as s}from"./vendor-D_DxLZN2.js";import{C as t}from"./Card-CCr5q94u.js";import{B as r}from"./Button-q_HxaLrT.js";import{M as a}from"./Modal-DDvsaOV2.js";import{D as l}from"./dataService-7pESmbQL.js";import"./router-BPhEMSNK.js";import"./supabase-BMSNwJ-5.js";import"./supabase-DCVaQTjR.js";const n=({isOpen:t,onClose:l,assessment:n,onComplete:i})=>{const[c,o]=s.useState(0),[d,m]=s.useState({}),[x,u]=s.useState(0),[h,p]=s.useState(!1),[g,j]=s.useState(!1),f=[{id:"1",question:"What is the primary purpose of React Hooks?",type:"multiple-choice",options:["To replace class components entirely","To allow state and lifecycle features in function components","To improve performance of React applications","To handle routing in React applications"],correctAnswer:"To allow state and lifecycle features in function components",explanation:"React Hooks were introduced to allow function components to use state and other React features that were previously only available in class components.",points:4},{id:"2",question:"Which hook is used for side effects in React?",type:"multiple-choice",options:["useState","useEffect","useContext","useReducer"],correctAnswer:"useEffect",explanation:"useEffect is used to perform side effects in function components, such as data fetching, subscriptions, or manually changing the DOM.",points:3},{id:"3",question:"React components must return a single root element.",type:"true-false",options:["True","False"],correctAnswer:"False",explanation:"With React Fragments or array returns, components can return multiple elements without a single root element.",points:2},{id:"4",question:"What does the dependency array in useEffect control?",type:"short-answer",correctAnswer:"when the effect runs",explanation:"The dependency array controls when the useEffect hook runs. If empty, it runs once after mount. If it contains values, it runs when those values change.",points:5},{id:"5",question:"Which of the following is NOT a valid way to create a React component?",type:"multiple-choice",options:["Function declaration","Arrow function","Class component","Object literal"],correctAnswer:"Object literal",explanation:"React components must be either functions or classes. Object literals cannot be used to create React components.",points:3}];s.useEffect(()=>{if(t&&n){const e=n.duration.match(/(\d+)/),s=e?parseInt(e[1]):30;u(60*s),o(0),m({}),p(!1),j(!1)}},[t,n]),s.useEffect(()=>{let e;return t&&x>0&&!h&&(e=setTimeout(()=>{u(e=>e<=1?(y(),0):e-1)},1e3)),()=>clearTimeout(e)},[x,t,h]);const b=(e,s)=>{m(t=>({...t,[e]:s}))},y=()=>{p(!0),setTimeout(()=>{N()},1e3)},N=()=>{let e=0,s=0;f.forEach(t=>{e+=t.points;const r=d[t.id];"short-answer"===t.type?r&&r.toLowerCase().includes(t.correctAnswer.toLowerCase())&&(s+=t.points):r===t.correctAnswer&&(s+=t.points)});const t=Math.round(s/e*100);i(t,d),l()},v=()=>Object.keys(d).length,w=f[c],k=(c+1)/f.length*100;return n?e.jsxs(e.Fragment,{children:[e.jsx(a,{isOpen:t,onClose:l,title:`${n.title} - ${n.type}`,size:"xl",children:h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-loader-4-line text-2xl text-blue-600 animate-spin"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Submitting Assessment"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we process your answers..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Question ",c+1," of ",f.length]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Answered: ",v(),"/",f.length]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-mono "+(x<300?"text-red-600":"text-gray-900"),children:(C=x,`${Math.floor(C/60)}:${(C%60).toString().padStart(2,"0")}`)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Time remaining"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${k}%`}})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 flex-1",children:w.question}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full ml-4",children:[w.points," pts"]})]}),e.jsxs("div",{className:"space-y-3",children:["multiple-choice"===w.type&&w.options&&e.jsx("div",{className:"space-y-2",children:w.options.map((s,t)=>e.jsxs("label",{className:"flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-blue-300 cursor-pointer transition-colors",children:[e.jsx("input",{type:"radio",name:`question-${w.id}`,value:s,checked:d[w.id]===s,onChange:e=>b(w.id,e.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-3 text-gray-900",children:s})]},t))}),"true-false"===w.type&&w.options&&e.jsx("div",{className:"flex space-x-4",children:w.options.map(s=>e.jsxs("label",{className:"flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-blue-300 cursor-pointer transition-colors flex-1 justify-center",children:[e.jsx("input",{type:"radio",name:`question-${w.id}`,value:s,checked:d[w.id]===s,onChange:e=>b(w.id,e.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-3 font-medium text-gray-900",children:s})]},s))}),"short-answer"===w.type&&e.jsx("textarea",{value:d[w.id]||"",onChange:e=>b(w.id,e.target.value),placeholder:"Type your answer here...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:4})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs(r,{variant:"outline",onClick:()=>{c>0&&o(e=>e-1)},disabled:0===c,children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-2",children:f.map((s,t)=>e.jsx("button",{onClick:()=>o(t),className:"w-8 h-8 rounded-full text-sm font-medium transition-colors "+(t===c?"bg-blue-600 text-white":d[f[t].id]?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:t+1},t))}),c===f.length-1?e.jsxs(r,{onClick:()=>{j(!0)},children:[e.jsx("i",{className:"ri-check-line mr-2"}),"Submit Assessment"]}):e.jsxs(r,{onClick:()=>{c<f.length-1&&o(e=>e+1)},children:["Next",e.jsx("i",{className:"ri-arrow-right-line ml-2"})]})]})]})}),e.jsx(a,{isOpen:g,onClose:()=>j(!1),title:"Submit Assessment",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-alert-line text-yellow-600 mr-2 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Are you sure you want to submit?"}),e.jsxs("p",{children:["You have answered ",v()," out of ",f.length," questions."]}),e.jsx("p",{className:"mt-1",children:"Once submitted, you cannot change your answers."})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(r,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsxs(r,{onClick:()=>{j(!1),p(!0),setTimeout(()=>{N()},1e3)},children:[e.jsx("i",{className:"ri-check-line mr-2"}),"Submit Now"]})]})]})})]}):null;var C},i=({isOpen:t,onClose:l,assessment:n,onRetake:i})=>{const[c,o]=s.useState("overview"),d={id:(null==n?void 0:n.id)||"1",title:(null==n?void 0:n.title)||"React Hooks and State Management",course:(null==n?void 0:n.course)||"Advanced React Development",type:(null==n?void 0:n.type)||"Practice",score:parseInt((null==n?void 0:n.score)||"87"),totalPoints:17,earnedPoints:15,duration:"45 mins",completedAt:"2024-01-20 14:30",timeSpent:"38 mins",questions:[{id:"1",question:"What is the primary purpose of React Hooks?",type:"multiple-choice",options:["To replace class components entirely","To allow state and lifecycle features in function components","To improve performance of React applications","To handle routing in React applications"],correctAnswer:"To allow state and lifecycle features in function components",userAnswer:"To allow state and lifecycle features in function components",explanation:"React Hooks were introduced to allow function components to use state and other React features that were previously only available in class components.",points:4,isCorrect:!0},{id:"2",question:"Which hook is used for side effects in React?",type:"multiple-choice",options:["useState","useEffect","useContext","useReducer"],correctAnswer:"useEffect",userAnswer:"useEffect",explanation:"useEffect is used to perform side effects in function components, such as data fetching, subscriptions, or manually changing the DOM.",points:3,isCorrect:!0},{id:"3",question:"React components must return a single root element.",type:"true-false",options:["True","False"],correctAnswer:"False",userAnswer:"True",explanation:"With React Fragments or array returns, components can return multiple elements without a single root element.",points:2,isCorrect:!1},{id:"4",question:"What does the dependency array in useEffect control?",type:"short-answer",correctAnswer:"when the effect runs",userAnswer:"when the effect executes",explanation:"The dependency array controls when the useEffect hook runs. If empty, it runs once after mount. If it contains values, it runs when those values change.",points:5,isCorrect:!0},{id:"5",question:"Which of the following is NOT a valid way to create a React component?",type:"multiple-choice",options:["Function declaration","Arrow function","Class component","Object literal"],correctAnswer:"Object literal",userAnswer:"Class component",explanation:"React components must be either functions or classes. Object literals cannot be used to create React components.",points:3,isCorrect:!1}],feedback:"Great understanding of React Hooks! Focus more on performance optimization patterns and component architecture.",recommendations:["Review React Fragments and multiple element returns","Practice with more complex useEffect scenarios","Study component creation patterns and best practices"]},m=d.questions.filter(e=>e.isCorrect).length,x=d.questions.length-m;return n?e.jsx(a,{isOpen:t,onClose:l,title:"Assessment Results",size:"xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:d.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:d.course}),e.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 rounded-full ${u=d.score,u>=90?"bg-green-100":u>=70?"bg-yellow-100":"bg-red-100"} mb-4`,children:e.jsxs("span",{className:`text-3xl font-bold ${(e=>e>=90?"text-green-600":e>=70?"text-yellow-600":"text-red-600")(d.score)}`,children:[d.score,"%"]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[d.earnedPoints,"/",d.totalPoints]}),e.jsx("div",{className:"text-gray-600",children:"Points"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[m,"/",d.questions.length]}),e.jsx("div",{className:"text-gray-600",children:"Correct"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:d.timeSpent}),e.jsx("div",{className:"text-gray-600",children:"Time Spent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:d.completedAt.split(" ")[0]}),e.jsx("div",{className:"text-gray-600",children:"Completed"})]})]})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[{key:"overview",label:"Overview",icon:"ri-dashboard-line"},{key:"questions",label:"Questions",icon:"ri-question-line"},{key:"feedback",label:"Feedback",icon:"ri-chat-3-line"}].map(s=>e.jsxs("button",{onClick:()=>o(s.key),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors cursor-pointer flex-1 justify-center "+(c===s.key?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[e.jsx("i",{className:`${s.icon} mr-2`}),s.label]},s.key))}),e.jsxs("div",{className:"min-h-[400px]",children:["overview"===c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Breakdown"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Correct Answers"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:m})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:m/d.questions.length*100+"%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Incorrect Answers"}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:x})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:x/d.questions.length*100+"%"}})})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Question Type Performance"}),e.jsx("div",{className:"space-y-4",children:["multiple-choice","true-false","short-answer"].map(s=>{const t=d.questions.filter(e=>e.type===s),r=t.filter(e=>e.isCorrect).length,a=t.length>0?Math.round(r/t.length*100):0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:s.replace("-"," ")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[r,"/",t.length]}),e.jsxs("span",{className:"text-sm font-medium "+(a>=70?"text-green-600":"text-red-600"),children:[a,"%"]})]})]},s)})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Time Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.timeSpent}),e.jsx("div",{className:"text-sm text-gray-600",children:"Time Spent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.duration}),e.jsx("div",{className:"text-sm text-gray-600",children:"Time Allowed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"7 mins"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Time Saved"})]})]})]})]}),"questions"===c&&e.jsx("div",{className:"space-y-4",children:d.questions.map((s,t)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 flex-1",children:[t+1,". ",s.question]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+(s.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s.isCorrect?"Correct":"Incorrect"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[s.points," pts"]})]})]}),e.jsxs("div",{className:"space-y-3",children:["multiple-choice"===s.type&&s.options&&e.jsx("div",{className:"space-y-2",children:s.options.map((t,r)=>e.jsx("div",{className:"p-2 rounded border text-sm "+(t===s.correctAnswer?"bg-green-100 border-green-300 text-green-800":t!==s.userAnswer||s.isCorrect?"bg-white border-gray-200 text-gray-700":"bg-red-100 border-red-300 text-red-800"),children:e.jsxs("div",{className:"flex items-center",children:[t===s.correctAnswer&&e.jsx("i",{className:"ri-check-line text-green-600 mr-2"}),t===s.userAnswer&&!s.isCorrect&&e.jsx("i",{className:"ri-close-line text-red-600 mr-2"}),e.jsx("span",{children:t}),t===s.userAnswer&&e.jsx("span",{className:"ml-auto text-xs font-medium",children:"Your Answer"})]})},r))}),"true-false"===s.type&&e.jsx("div",{className:"flex space-x-4",children:["True","False"].map(t=>e.jsxs("div",{className:"p-2 rounded border text-sm flex-1 text-center "+(t===s.correctAnswer?"bg-green-100 border-green-300 text-green-800":t!==s.userAnswer||s.isCorrect?"bg-white border-gray-200 text-gray-700":"bg-red-100 border-red-300 text-red-800"),children:[t===s.correctAnswer&&e.jsx("i",{className:"ri-check-line text-green-600 mr-1"}),t===s.userAnswer&&!s.isCorrect&&e.jsx("i",{className:"ri-close-line text-red-600 mr-1"}),t]},t))}),"short-answer"===s.type&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-green-100 border border-green-300 rounded",children:[e.jsx("div",{className:"text-xs font-medium text-green-800 mb-1",children:"Correct Answer:"}),e.jsx("div",{className:"text-sm text-green-700",children:s.correctAnswer})]}),e.jsxs("div",{className:"p-3 rounded border "+(s.isCorrect?"bg-green-100 border-green-300":"bg-red-100 border-red-300"),children:[e.jsx("div",{className:"text-xs font-medium mb-1 "+(s.isCorrect?"text-green-800":"text-red-800"),children:"Your Answer:"}),e.jsx("div",{className:"text-sm "+(s.isCorrect?"text-green-700":"text-red-700"),children:s.userAnswer||"No answer provided"})]})]}),s.explanation&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-lightbulb-line text-blue-600 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-blue-800 mb-1",children:"Explanation:"}),e.jsx("div",{className:"text-sm text-blue-700",children:s.explanation})]})]})})]})]},s.id))}),"feedback"===c&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-chat-3-line text-blue-600 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Instructor Feedback"}),e.jsx("p",{className:"text-blue-800",children:d.feedback})]})]})}),d.recommendations&&d.recommendations.length>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-lightbulb-line text-yellow-600 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-3",children:"Recommendations for Improvement"}),e.jsx("ul",{className:"space-y-2",children:d.recommendations.map((s,t)=>e.jsxs("li",{className:"flex items-start text-yellow-800",children:[e.jsx("i",{className:"ri-arrow-right-s-line text-yellow-600 mr-2 mt-0.5"}),e.jsx("span",{className:"text-sm",children:s})]},t))})]})]})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-trophy-line text-green-600 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Strengths"}),e.jsxs("ul",{className:"space-y-1 text-green-800 text-sm",children:[e.jsx("li",{children:"• Strong understanding of React Hooks fundamentals"}),e.jsx("li",{children:"• Good grasp of useEffect and side effects management"}),e.jsx("li",{children:"• Excellent performance on conceptual questions"})]})]})]})}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-bookmark-line text-gray-600 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Study Resources"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("a",{href:"#",className:"block text-blue-600 hover:text-blue-700 text-sm",children:[e.jsx("i",{className:"ri-external-link-line mr-1"}),"React Fragments Documentation"]}),e.jsxs("a",{href:"#",className:"block text-blue-600 hover:text-blue-700 text-sm",children:[e.jsx("i",{className:"ri-external-link-line mr-1"}),"Advanced useEffect Patterns"]}),e.jsxs("a",{href:"#",className:"block text-blue-600 hover:text-blue-700 text-sm",children:[e.jsx("i",{className:"ri-external-link-line mr-1"}),"Component Creation Best Practices"]})]})]})]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200",children:[e.jsxs(r,{variant:"outline",onClick:l,children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to Assessments"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(r,{variant:"outline",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Download Results"]}),i&&e.jsxs(r,{onClick:i,children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Retake Assessment"]})]})]})]})}):null;var u},c=()=>{const[c,o]=s.useState([]),[d,m]=s.useState("all"),[x,u]=s.useState("all"),[h,p]=s.useState(!1),[g,j]=s.useState(null),[f,b]=s.useState(!1),[y,N]=s.useState(!1),[v,w]=s.useState(null),[k,C]=s.useState(!0);s.useEffect(()=>{(async()=>{try{const e=await l.getAssessments(),s=await l.getAssessmentResults(),t=e.map(e=>{var t;const r=s.find(s=>s.assessment_id===e.id);return{id:e.id,title:e.title,course:(null==(t=e.course)?void 0:t.title)||"General Assessment",courseId:e.course_id||"1",type:e.time_limit_minutes?"Quiz":"Practice",duration:e.time_limit_minutes?`${e.time_limit_minutes} mins`:"No limit",questions:Array.isArray(e.questions)?e.questions.length:0,status:r?"completed":"upcoming",difficulty:e.passing_score>80?"Hard":e.passing_score>60?"Medium":"Easy",topics:["General Topics"],attempts:r?1:0,maxAttempts:3,dueDate:void 0,score:null==r?void 0:r.score.toString(),maxScore:"100",feedback:"Good work!"}});o(t)}catch(e){console.error("Error fetching assessments:",e)}finally{C(!1)}})()},[]);const A=c.filter(e=>{const s="all"===d||e.courseId===d,t="all"===x||e.status===x;return s&&t}),S=[{label:"Total Assessments",value:c.length.toString(),icon:"ri-file-list-line",color:"blue"},{label:"Completed",value:c.filter(e=>"completed"===e.status).length.toString(),icon:"ri-check-line",color:"green"},{label:"In Progress",value:c.filter(e=>"in-progress"===e.status).length.toString(),icon:"ri-play-line",color:"orange"},{label:"Average Score",value:"89%",icon:"ri-star-line",color:"purple"}],R=e=>{j(e),p(!0)},T=e=>({Easy:"bg-green-100 text-green-800",Medium:"bg-yellow-100 text-yellow-800",Hard:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Assessments"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Practice tests, quizzes, and track your progress"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:S.map((s,r)=>e.jsxs(t,{className:"text-center",children:[e.jsx("div",{className:`w-12 h-12 mx-auto mb-4 rounded-full bg-${s.color}-100 flex items-center justify-center`,children:e.jsx("i",{className:`${s.icon} text-2xl text-${s.color}-600`})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:s.value}),e.jsx("div",{className:"text-sm text-gray-600",children:s.label})]},r))}),e.jsxs(t,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Course"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[{id:"all",title:"All Courses",assessmentCount:0},{id:"1",title:"Advanced React Development",assessmentCount:5},{id:"2",title:"Node.js Backend Mastery",assessmentCount:4},{id:"3",title:"JavaScript Fundamentals",assessmentCount:6},{id:"4",title:"Database Design Principles",assessmentCount:3},{id:"5",title:"API Development with REST",assessmentCount:4}].map(s=>e.jsxs("button",{onClick:()=>m(s.id),className:"p-4 rounded-lg border-2 transition-all cursor-pointer text-left "+(d===s.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),"all"!==s.id&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[s.assessmentCount," assessments"]})]},s.id))})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[{key:"all",label:"All"},{key:"upcoming",label:"Upcoming"},{key:"in-progress",label:"In Progress"},{key:"completed",label:"Completed"}].map(s=>e.jsx("button",{onClick:()=>u(s.key),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors cursor-pointer whitespace-nowrap "+(x===s.key?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:s.label},s.key))}),e.jsx("div",{className:"space-y-4",children:A.map(s=>{return e.jsx(t,{className:"hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-2",children:s.course})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a=s.type,{Quiz:"bg-blue-100 text-blue-800",Test:"bg-purple-100 text-purple-800",Practice:"bg-green-100 text-green-800"}[a]||"bg-gray-100 text-gray-800"}`,children:s.type}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T(s.difficulty)}`,children:s.difficulty})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-time-line mr-2 text-gray-400"}),s.duration]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-question-mark mr-2 text-gray-400"}),s.questions," questions"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-refresh-line mr-2 text-gray-400"}),s.attempts,"/",s.maxAttempts," attempts"]}),s.dueDate&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-calendar-line mr-2 text-gray-400"}),"Due: ",s.dueDate]})]}),s.topics.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Topics covered:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.topics.map((s,t)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-md",children:s},t))})]}),"completed"===s.status&&s.score&&e.jsx("div",{className:"bg-green-50 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Score: "}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[s.score,"%"]})]}),e.jsx("i",{className:"ri-trophy-line text-2xl text-green-600"})]})}),s.feedback&&e.jsx("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-chat-3-line text-blue-600 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-900 mb-1",children:"Instructor Feedback"}),e.jsx("div",{className:"text-sm text-blue-800",children:s.feedback})]})]})})]}),e.jsxs("div",{className:"ml-6 flex flex-col space-y-2",children:["upcoming"===s.status&&e.jsxs(r,{onClick:()=>R(s),children:[e.jsx("i",{className:"ri-play-line mr-2"}),"Start ",s.type]}),"in-progress"===s.status&&e.jsxs(r,{className:"bg-orange-600 hover:bg-orange-700",onClick:()=>R(s),children:[e.jsx("i",{className:"ri-play-line mr-2"}),"Continue"]}),"completed"===s.status&&e.jsxs(r,{variant:"outline",onClick:()=>(e=>{w(e),N(!0)})(s),children:[e.jsx("i",{className:"ri-eye-line mr-2"}),"View Results"]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium text-center "+("upcoming"===s.status?"bg-gray-100 text-gray-800":"in-progress"===s.status?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"),children:"upcoming"===s.status?"Ready":"in-progress"===s.status?"In Progress":"Completed"})]})]})},s.id);var a})}),0===A.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-file-list-line text-2xl text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No assessments found"}),e.jsx("p",{className:"text-gray-600",children:"all"===d?"No assessments match the current filter":"No assessments available for the selected course"})]}),e.jsx(a,{isOpen:h,onClose:()=>{p(!1),j(null)},title:"Start Assessment",children:g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:g.title}),e.jsx("p",{className:"text-gray-600 mb-3",children:g.course}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Duration:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:g.duration})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Questions:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:g.questions})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Difficulty:"}),e.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${T(g.difficulty)}`,children:g.difficulty})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Attempts left:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:g.maxAttempts-g.attempts})]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-alert-line text-yellow-600 mr-2 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Important Instructions:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsxs("li",{children:["You have ",g.duration," to complete this assessment"]}),e.jsx("li",{children:"Make sure you have a stable internet connection"}),e.jsx("li",{children:"Once started, the timer cannot be paused"}),e.jsx("li",{children:"You can save and continue later for practice assessments"})]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(r,{variant:"outline",onClick:()=>{p(!1),j(null)},children:"Cancel"}),e.jsxs(r,{onClick:()=>{p(!1),b(!0)},children:[e.jsx("i",{className:"ri-play-line mr-2"}),"Start Assessment"]})]})]})}),e.jsx(n,{isOpen:f,onClose:()=>{b(!1),j(null)},assessment:g,onComplete:(e,s)=>{o(s=>s.map(s=>s.id===(null==g?void 0:g.id)?{...s,status:"completed",score:e.toString(),maxScore:"100",attempts:s.attempts+1,feedback:e>=90?"Excellent work! You have a strong understanding of the concepts.":e>=70?"Good job! Review the areas you missed for better understanding.":"Keep practicing! Focus on the fundamental concepts and try again."}:s)),b(!1),j(null)}}),e.jsx(i,{isOpen:y,onClose:()=>{N(!1),w(null)},assessment:v,onRetake:()=>{if(N(!1),v){const e={...v,status:"upcoming"};j(e),b(!0)}}})]})};export{c as default};
