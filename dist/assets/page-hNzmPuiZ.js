const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BaWXG3YY.js","assets/vendor-D_DxLZN2.js","assets/router-BbFJyaaj.js","assets/supabase-DnW1kxsT.js","assets/index-BkkA-rvi.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./supabase-DnW1kxsT.js";import{j as s}from"./index-BaWXG3YY.js";import{r as t}from"./vendor-D_DxLZN2.js";import{S as r}from"./ScheduleSessionModal-D2GZQU_a.js";import{M as a}from"./Modal-C5SmEZl1.js";import{D as l}from"./dataService-M2AFkWLp.js";import"./router-BbFJyaaj.js";const n=({isOpen:e,onClose:t,student:r})=>{const l=[{module:"HTML & CSS Fundamentals",completed:!0,score:95,completedDate:"2024-11-20"},{module:"JavaScript Basics",completed:!0,score:88,completedDate:"2024-12-01"},{module:"React Introduction",completed:!0,score:92,completedDate:"2024-12-10"},{module:"State Management",completed:!1,score:0,completedDate:null},{module:"API Integration",completed:!1,score:0,completedDate:null},{module:"Final Project",completed:!1,score:0,completedDate:null}];return s.jsx(a,{isOpen:e,onClose:t,title:`${r.name}'s Progress`,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Overall Progress"}),s.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[r.progress,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:s.jsx("div",{className:"h-3 rounded-full "+(n=r.progress,n>=80?"bg-green-500":n>=60?"bg-blue-500":"bg-red-500"),style:{width:`${r.progress}%`}})}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:r.totalSessions}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Sessions"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:l.filter(e=>e.completed).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Modules Completed"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:"91"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Average Score"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Module Progress"}),s.jsx("div",{className:"space-y-3",children:l.map((e,t)=>{return s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(e.completed?"bg-green-100":"bg-gray-100"),children:e.completed?s.jsx("i",{className:"ri-check-line text-green-600"}):s.jsx("i",{className:"ri-time-line text-gray-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:e.module}),e.completedDate&&s.jsxs("div",{className:"text-sm text-gray-600",children:["Completed on ",e.completedDate]})]})]}),s.jsx("div",{className:"text-right",children:e.completed?s.jsxs("div",{className:"text-lg font-bold "+(r=e.score,r>=90?"text-green-600":r>=80?"text-blue-600":r>=70?"text-yellow-600":"text-red-600"),children:[e.score,"%"]}):s.jsx("div",{className:"text-sm text-gray-500",children:"Not started"})})]},t);var r})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Sessions"}),s.jsx("div",{className:"space-y-3",children:[{date:"2024-12-22",topic:"React Components",duration:"60 min",rating:5},{date:"2024-12-15",topic:"JavaScript Arrays",duration:"45 min",rating:4},{date:"2024-12-08",topic:"CSS Flexbox",duration:"60 min",rating:5},{date:"2024-12-01",topic:"HTML Semantics",duration:"30 min",rating:4}].map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:e.topic}),s.jsxs("div",{className:"text-sm text-gray-600",children:[e.date," • ",e.duration]})]}),s.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((t,r)=>s.jsx("i",{className:`ri-star-${r<e.rating?"fill":"line"} text-yellow-400`},r))})]},t))})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer",children:"Close"}),s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer",children:"Export Report"})]})]})});var n},i=({isOpen:e,onClose:r,student:l})=>{const[n,i]=t.useState({subject:"",message:"",priority:"normal",sendCopy:!0}),o=[{name:"Progress Check-in",subject:"Weekly Progress Check-in",message:`Hi ${l.name},\n\nI hope you're doing well with your ${l.course} studies. I wanted to check in on your progress and see if you have any questions or need additional support.\n\nPlease let me know if there's anything specific you'd like to work on in our next session.\n\nBest regards,`},{name:"Session Reminder",subject:"Upcoming Session Reminder",message:`Hi ${l.name},\n\nThis is a friendly reminder about our upcoming session. Please make sure you have:\n\n• Your course materials ready\n• Any questions you'd like to discuss\n• A stable internet connection\n\nLooking forward to our session!\n\nBest regards,`},{name:"Encouragement",subject:"Keep up the great work!",message:`Hi ${l.name},\n\nI wanted to reach out and let you know that I'm really impressed with your progress in ${l.course}. Your dedication and hard work are paying off!\n\nKeep up the excellent work, and remember that I'm here to support you every step of the way.\n\nBest regards,`}],d=e=>{if("checkbox"===e.target.type){const s=e.target;i(t=>({...t,[e.target.name]:s.checked}))}else i(s=>({...s,[e.target.name]:e.target.value}))};return s.jsx(a,{isOpen:e,onClose:r,title:`Send Message to ${l.name}`,children:s.jsxs("form",{onSubmit:e=>{e.preventDefault(),console.log("Sending message:",n),r()},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quick Templates"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((e,t)=>s.jsx("button",{type:"button",onClick:()=>(e=>{i(s=>({...s,subject:e.subject,message:e.message}))})(e),className:"px-3 py-1 text-xs border border-gray-300 rounded-full hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer",children:e.name},t))})]}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"To:"})," ",l.name," (",l.email,")"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Course:"})," ",l.course]})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{name:"priority",value:n.priority,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"normal",children:"Normal"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),s.jsx("input",{type:"text",name:"subject",value:n.subject,onChange:d,placeholder:"Enter message subject...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),s.jsx("textarea",{name:"message",value:n.message,onChange:d,rows:8,placeholder:"Type your message here...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",maxLength:500,required:!0}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n.message.length,"/500 characters"]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"sendCopy",name:"sendCopy",checked:n.sendCopy,onChange:d,className:"mr-2"}),s.jsx("label",{htmlFor:"sendCopy",className:"text-sm text-gray-700",children:"Send a copy to myself"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer",children:"Cancel"}),s.jsx("button",{type:"button",className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer",children:"Save Draft"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer",children:"Send Message"})]})]})})},o=()=>{const[a,o]=t.useState(""),[d,c]=t.useState("all"),[x,m]=t.useState(null),[u,g]=t.useState([]),[h,p]=t.useState(!0),[j,b]=t.useState({scheduleSession:!1,viewProgress:!1,sendMessage:!1});t.useEffect(()=>{(async()=>{try{const{authService:s}=await e(async()=>{const{authService:e}=await import("./index-BaWXG3YY.js").then(e=>e.c);return{authService:e}},__vite__mapDeps([0,1,2,3,4])),t=await s.getCurrentUser();if(!(null==t?void 0:t.id))return void console.warn("No authenticated user found");const r=await l.getSessions(t.id,"mentor"),a=await l.getEnrollments(),n=[...new Set(r.map(e=>e.student_id))],i=(await Promise.all(n.map(e=>l.getProfile(e)))).filter(Boolean).map(e=>{var s;const t=a.filter(s=>s.student_id===e.id),l=t.sort((e,s)=>new Date(s.enrolled_at).getTime()-new Date(e.enrolled_at).getTime())[0],n=r.filter(s=>s.student_id===e.id),i=n.sort((e,s)=>new Date(s.scheduled_at).getTime()-new Date(e.scheduled_at).getTime())[0];return{...e,course:(null==(s=null==l?void 0:l.course)?void 0:s.title)||"No course enrolled",progress:(null==l?void 0:l.progress)||0,status:t.length>0?"active":"inactive",joinDate:(null==l?void 0:l.enrolled_at)||e.created_at,lastSession:i?new Date(i.scheduled_at).toLocaleDateString():"No sessions",totalSessions:n.length,avatar:e.name.split(" ").map(e=>e[0]).join("").toUpperCase()}});g(i)}catch(s){console.error("Error fetching students:",s)}finally{p(!1)}})()},[]);const y=u.filter(e=>{const s=e.name.toLowerCase().includes(a.toLowerCase())||e.course.toLowerCase().includes(a.toLowerCase()),t="all"===d||e.status===d;return s&&t}),v=(e,s)=>{m(s),b(s=>({...s,[e]:!0}))},f=e=>{b(s=>({...s,[e]:!1})),m(null)};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Students"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and track your students' progress"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 flex items-center justify-center mx-auto mb-3 bg-blue-100 rounded-full",children:s.jsx("i",{className:"ri-group-line text-2xl text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Students"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 flex items-center justify-center mx-auto mb-3 bg-green-100 rounded-full",children:s.jsx("i",{className:"ri-user-check-line text-2xl text-green-600"})}),s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.filter(e=>"active"===e.status).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Active Students"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 flex items-center justify-center mx-auto mb-3 bg-purple-100 rounded-full",children:s.jsx("i",{className:"ri-trophy-line text-2xl text-purple-600"})}),s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"82%"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Avg Progress"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 flex items-center justify-center mx-auto mb-3 bg-orange-100 rounded-full",children:s.jsx("i",{className:"ri-calendar-check-line text-2xl text-orange-600"})}),s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"60"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Sessions"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search students by name or course...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",value:a,onChange:e=>o(e.target.value)})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"relative",children:s.jsxs("button",{className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm cursor-pointer whitespace-nowrap",children:[s.jsx("i",{className:"ri-filter-line mr-2"}),"Filter: ","all"===d?"All":"active"===d?"Active":"Inactive",s.jsx("i",{className:"ri-arrow-down-s-line ml-2"})]})}),s.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm whitespace-nowrap cursor-pointer",children:"Export List"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"space-y-4",children:y.map(e=>{return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 font-medium text-sm",children:e.avatar})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.email}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[s.jsx("span",{children:e.course}),s.jsx("span",{children:"•"}),s.jsxs("span",{children:["Joined ",e.joinDate]}),s.jsx("span",{children:"•"}),s.jsxs("span",{children:[e.totalSessions," sessions"]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Progress:"}),s.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full "+(r=e.progress,r>=80?"bg-green-500":r>=60?"bg-blue-500":"bg-red-500"),style:{width:`${e.progress}%`}})}),s.jsxs("span",{className:"text-sm font-medium text-gray-900 ml-2",children:[e.progress,"%"]})]}),s.jsx("div",{className:"flex items-center justify-end",children:s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(t=e.status,"active"===t?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>v("sendMessage",e),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors cursor-pointer",children:s.jsx("i",{className:"ri-message-line"})}),s.jsx("button",{onClick:()=>v("scheduleSession",e),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors cursor-pointer",children:s.jsx("i",{className:"ri-calendar-line"})}),s.jsx("button",{onClick:()=>v("viewProgress",e),className:"p-2 text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors cursor-pointer",children:s.jsx("i",{className:"ri-bar-chart-line"})})]})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Last session: ",e.lastSession]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>v("scheduleSession",e),className:"bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer",children:"Schedule Session"}),s.jsx("button",{onClick:()=>v("viewProgress",e),className:"border border-gray-300 text-gray-700 px-3 py-1 rounded text-xs hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer",children:"View Progress"}),s.jsx("button",{onClick:()=>v("sendMessage",e),className:"border border-gray-300 text-gray-700 px-3 py-1 rounded text-xs hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer",children:"Send Message"})]})]})})]},e.id);var t,r})}),0===y.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("i",{className:"ri-user-line text-2xl text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Students Found"}),s.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria."})]})]})}),x&&s.jsxs(s.Fragment,{children:[s.jsx(r,{isOpen:j.scheduleSession,onClose:()=>f("scheduleSession"),student:x}),s.jsx(n,{isOpen:j.viewProgress,onClose:()=>f("viewProgress"),student:x}),s.jsx(i,{isOpen:j.sendMessage,onClose:()=>f("sendMessage"),student:x})]})]})};export{o as default};
