import{j as e}from"./index-BaWXG3YY.js";import{r as s}from"./vendor-D_DxLZN2.js";import{L as t}from"./router-BbFJyaaj.js";import{C as i}from"./Card-CQri447u.js";import{B as r}from"./Button-lmmCuxjA.js";import{M as a}from"./Modal-C5SmEZl1.js";import"./supabase-DnW1kxsT.js";const l=()=>{const[l,n]=s.useState("all"),[o,c]=s.useState("latest"),[d,m]=s.useState(null),[x,u]=s.useState(!1),[h,p]=s.useState(""),[g,y]=s.useState(!1),[b,j]=s.useState(null),[f,N]=s.useState([{id:1,courseId:"1",courseTitle:"Advanced React Development",lessonTitle:"Context API Deep Dive",question:"How do I properly implement context providers in a large application? I'm having trouble with performance issues when the context value changes frequently.",category:"technical",submittedAt:"2024-01-16T10:30:00Z",status:"answered",lastActivity:"2024-01-16T14:20:00Z",replies:[{id:1,author:"Sarah Johnson",role:"mentor",content:"Great question! For large applications, you should split your contexts based on update frequency and scope. Use React.memo() for components that don't need to re-render on every context change.",timestamp:"2024-01-16T12:45:00Z"},{id:2,author:"Alex Johnson",role:"student",content:"Thank you! That makes sense. Should I create separate contexts for user data and app settings?",timestamp:"2024-01-16T13:10:00Z"},{id:3,author:"Sarah Johnson",role:"mentor",content:"Exactly! Separate contexts will prevent unnecessary re-renders. User data changes frequently, while app settings are more static.",timestamp:"2024-01-16T14:20:00Z"}]},{id:2,courseId:"2",courseTitle:"Node.js Backend Mastery",lessonTitle:"Database Integration",question:"What are the best practices for connecting to MongoDB in a production environment? Should I use connection pooling?",category:"concept",submittedAt:"2024-01-14T14:15:00Z",status:"pending",lastActivity:"2024-01-14T14:15:00Z",replies:[]},{id:3,courseId:"3",courseTitle:"JavaScript Fundamentals",lessonTitle:"Error Handling",question:"Can someone explain the difference between try-catch and promise rejection handling? I'm confused about when to use each approach.",category:"general",submittedAt:"2024-01-10T09:45:00Z",status:"answered",lastActivity:"2024-01-12T16:30:00Z",replies:[{id:4,author:"Mike Chen",role:"mentor",content:"Try-catch is for synchronous code and async/await. Promise rejection handling (.catch()) is for promise chains. Both serve different purposes in error handling.",timestamp:"2024-01-11T10:20:00Z"},{id:5,author:"Alex Johnson",role:"student",content:"So for async/await I should use try-catch, but for .then() chains I should use .catch()?",timestamp:"2024-01-11T11:05:00Z"},{id:6,author:"Mike Chen",role:"mentor",content:"Correct! Try-catch with async/await makes error handling more readable and consistent with synchronous code patterns.",timestamp:"2024-01-12T16:30:00Z"}]},{id:4,courseId:"1",courseTitle:"Advanced React Development",lessonTitle:"Custom Hooks",question:"I'm creating a custom hook for data fetching. How should I handle loading states and error handling within the hook?",category:"technical",submittedAt:"2024-01-08T16:20:00Z",status:"closed",lastActivity:"2024-01-09T10:15:00Z",replies:[{id:7,author:"Sarah Johnson",role:"mentor",content:"You should return an object with data, loading, and error states. Use useReducer for complex state management or useState for simpler cases.",timestamp:"2024-01-09T10:15:00Z"}]},{id:5,courseId:"4",courseTitle:"Full Stack Web Development",lessonTitle:"API Design",question:"What's the difference between REST and GraphQL APIs? When should I choose one over the other?",category:"concept",submittedAt:"2024-01-05T11:30:00Z",status:"answered",lastActivity:"2024-01-06T09:45:00Z",replies:[{id:8,author:"David Wilson",role:"mentor",content:"REST is simpler and widely supported. GraphQL gives you more flexibility but adds complexity. For simple CRUD operations, REST is fine. For complex data requirements, consider GraphQL.",timestamp:"2024-01-06T09:45:00Z"}]}]),v=[{key:"all",label:"All Questions",count:f.length},{key:"pending",label:"Pending",count:f.filter(e=>"pending"===e.status).length},{key:"answered",label:"Answered",count:f.filter(e=>"answered"===e.status).length},{key:"closed",label:"Closed",count:f.filter(e=>"closed"===e.status).length}],w=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=s=>{const t={answered:{color:"bg-green-100 text-green-800 border-green-200",text:"Answered",icon:"ri-check-circle-line"},pending:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",text:"Pending",icon:"ri-time-line"},closed:{color:"bg-gray-100 text-gray-800 border-gray-200",text:"Closed",icon:"ri-lock-line"}}[s];return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 text-xs font-medium rounded-full border ${t.color}`,children:[e.jsx("i",{className:`${t.icon} mr-1`}),t.text]})},k=e=>({technical:"bg-blue-100 text-blue-800 border-blue-200",concept:"bg-purple-100 text-purple-800 border-purple-200",general:"bg-gray-100 text-gray-800 border-gray-200",assignment:"bg-orange-100 text-orange-800 border-orange-200",other:"bg-pink-100 text-pink-800 border-pink-200"}[e]||"bg-gray-100 text-gray-800 border-gray-200"),A=f.filter(e=>"all"===l||e.status===l),C=[...A].sort((e,s)=>"latest"===o?new Date(s.lastActivity).getTime()-new Date(e.lastActivity).getTime():"oldest"===o?new Date(e.submittedAt).getTime()-new Date(s.submittedAt).getTime():0),S=e=>{m(e),u(!0)},D=(e,s)=>{u(!1),console.log(`Navigate to course ${e}, lesson: ${s}`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"My Discussions"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Track all your questions and discussions across courses"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("select",{value:o,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"latest",children:"Latest Activity"}),e.jsx("option",{value:"oldest",children:"Oldest First"})]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:v.map(s=>e.jsxs("button",{onClick:()=>n(s.key),className:"flex items-center px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap "+(l===s.key?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.label,e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full "+(l===s.key?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"),children:s.count})]},s.key))}),C.length>0?e.jsx("div",{className:"space-y-4",children:C.map(s=>e.jsx(i,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>S(s),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 text-xs font-medium rounded-full border ${k(s.category)}`,children:s.category}),T(s.status),s.replies.length>0&&e.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx("i",{className:"ri-message-line mr-1"}),s.replies.length," replies"]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:s.question}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("i",{className:"ri-book-line mr-2 text-blue-600"}),e.jsx("span",{className:"font-medium",children:s.courseTitle})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("i",{className:"ri-play-circle-line mr-2 text-green-600"}),e.jsx("span",{children:s.lessonTitle})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded px-2 py-1 transition-colors cursor-pointer",onClick:e=>((e,s)=>{s.stopPropagation(),j(e),y(!0)})(s,e),title:"Click to view activity timeline",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"ri-time-line mr-1"}),"Asked on ",w(s.submittedAt)]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"ri-history-line mr-1"}),"Last activity ",w(s.lastActivity)]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:[e.jsx("div",{className:"flex space-x-2",children:e.jsxs(r,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),D(s.courseId,s.lessonTitle)},children:[e.jsx("i",{className:"ri-external-link-line mr-2"}),"View in Course"]})}),e.jsx("div",{className:"text-xs text-gray-400",children:"Click to view full discussion"})]})]})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-chat-3-line text-2xl text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"all"===l?"No discussions yet":`No ${l} discussions`}),e.jsx("p",{className:"text-gray-600 mb-4",children:"all"===l?"Ask questions during your lessons to start discussions with mentors":`You don't have any ${l} discussions at the moment`}),e.jsx(t,{to:"/student/my-courses",children:e.jsxs(r,{children:[e.jsx("i",{className:"ri-book-line mr-2"}),"Browse Courses"]})})]}),e.jsx(a,{isOpen:x,onClose:()=>u(!1),className:"max-w-4xl",children:d&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 text-xs font-medium rounded-full border ${k(d.category)}`,children:d.category}),T(d.status)]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:d.question}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("i",{className:"ri-book-line mr-2 text-blue-600"}),e.jsx("span",{className:"font-medium",children:d.courseTitle})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("i",{className:"ri-play-circle-line mr-2 text-green-600"}),e.jsx("span",{children:d.lessonTitle})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Asked on ",w(d.submittedAt)]})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>D(d.courseId,d.lessonTitle),children:[e.jsx("i",{className:"ri-external-link-line mr-2"}),"Go to Lesson"]}),e.jsx("button",{onClick:()=>u(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:e.jsx("i",{className:"ri-close-line text-lg"})})]})]}),e.jsx("div",{className:"space-y-4 mb-6",children:d.replies.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx("i",{className:"ri-message-line mr-2"}),"Replies (",d.replies.length,")"]}),d.replies.map(s=>e.jsxs("div",{className:"flex space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-semibold text-white "+("mentor"===s.role?"bg-blue-600":"bg-purple-600"),children:s.author.split(" ").map(e=>e[0]).join("").toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.author}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("mentor"===s.role?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:"mentor"===s.role?"Mentor":"Student"}),e.jsx("span",{className:"text-xs text-gray-500",children:w(s.timestamp)})]}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:s.content})]})]},s.id))]}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx("i",{className:"ri-message-line text-2xl text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No replies yet. Be the first to continue the discussion!"})]})}),"closed"!==d.status&&e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Add a Reply"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:h,onChange:e=>p(e.target.value),placeholder:"Continue the discussion...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:4,maxLength:1e3}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[h.length,"/1000 characters"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>p(""),children:"Clear"}),e.jsxs(r,{size:"sm",onClick:()=>{if(!d||!h.trim())return;const e={id:Date.now(),author:"Alex Johnson",role:"student",content:h.trim(),timestamp:(new Date).toISOString()};N(s=>s.map(s=>s.id===d.id?{...s,replies:[...s.replies,e],lastActivity:(new Date).toISOString()}:s)),m(s=>s?{...s,replies:[...s.replies,e],lastActivity:(new Date).toISOString()}:null),p("")},disabled:!h.trim(),children:[e.jsx("i",{className:"ri-send-plane-line mr-2"}),"Reply"]})]})]})]})]})]})}),e.jsx(a,{isOpen:g,onClose:()=>y(!1),className:"max-w-2xl",children:b&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Activity Timeline"}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:b.question})]}),e.jsx("button",{onClick:()=>y(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:e.jsx("i",{className:"ri-close-line text-lg"})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-book-line text-xl text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:b.courseTitle}),e.jsx("p",{className:"text-sm text-gray-600",children:b.lessonTitle})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Discussion Activity"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),(I=b,[{type:"question",timestamp:I.submittedAt,description:"Question submitted",icon:"ri-question-line",color:"bg-blue-100 text-blue-600"},...I.replies.map((e,s)=>({type:"reply",timestamp:e.timestamp,description:`Reply by ${e.author} (${e.role})`,icon:"mentor"===e.role?"ri-user-star-line":"ri-user-line",color:"mentor"===e.role?"bg-green-100 text-green-600":"bg-purple-100 text-purple-600"}))].sort((e,s)=>new Date(e.timestamp).getTime()-new Date(s.timestamp).getTime())).map((s,t)=>e.jsxs("div",{className:"relative flex items-start space-x-4 pb-6 last:pb-0",children:[e.jsx("div",{className:`relative z-10 w-12 h-12 rounded-full border-4 border-white shadow-md flex items-center justify-center ${s.color}`,children:e.jsx("i",{className:`${s.icon} text-lg`})}),e.jsxs("div",{className:"flex-1 min-w-0 pt-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.description}),e.jsx("span",{className:"text-xs text-gray-500",children:w(s.timestamp)})]}),"question"===s.type&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Question was submitted for review"}),"reply"===s.type&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"New response added to discussion"})]})]},t))]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-6",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:b.replies.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Total Replies"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:Math.ceil((new Date(b.lastActivity).getTime()-new Date(b.submittedAt).getTime())/864e5)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Days Active"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900 capitalize",children:b.status}),e.jsx("div",{className:"text-xs text-gray-500",children:"Current Status"})]})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 mt-6 border-t border-gray-200",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>{y(!1),S(b)},children:[e.jsx("i",{className:"ri-message-line mr-2"}),"View Full Discussion"]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>D(b.courseId,b.lessonTitle),children:[e.jsx("i",{className:"ri-external-link-line mr-2"}),"Go to Lesson"]})]})]})})]});var I};export{l as default};
