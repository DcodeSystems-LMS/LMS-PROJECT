import{j as e}from"./index-tBdcIxzk.js";import{r}from"./vendor-D_DxLZN2.js";import{C as s}from"./Card-CCr5q94u.js";import{B as n}from"./Button-q_HxaLrT.js";import{M as i}from"./Modal-DDvsaOV2.js";import"./router-BPhEMSNK.js";import"./supabase-BMSNwJ-5.js";const a=[{id:"1",name:"Google SSO",type:"sso",provider:"Google",status:"active",description:"Single Sign-On with Google Workspace",lastSync:"2024-01-15T10:30:00Z",config:{clientId:"xxx...",domain:"company.com"}},{id:"2",name:"Stripe Payments",type:"payment",provider:"Stripe",status:"active",description:"Payment processing for course enrollments",lastSync:"2024-01-15T09:15:00Z",config:{mode:"live",currency:"USD"}},{id:"3",name:"Canvas LTI",type:"lti",provider:"Canvas",status:"inactive",description:"LTI 1.3 integration with Canvas LMS",config:{ltiVersion:"1.3",deploymentId:"canvas-123"}},{id:"4",name:"Progress Webhook",type:"webhook",provider:"Custom",status:"error",description:"Student progress notifications",lastSync:"2024-01-14T18:45:00Z",config:{endpoint:"https://api.university.edu/webhooks/progress"}}],t=[{key:"sso",label:"SSO",icon:"ri-shield-user-line",color:"text-blue-600"},{key:"payment",label:"Payments",icon:"ri-money-dollar-circle-line",color:"text-green-600"},{key:"lti",label:"LTI",icon:"ri-links-line",color:"text-purple-600"},{key:"webhook",label:"Webhooks",icon:"ri-webhook-line",color:"text-orange-600"}];function l(){var l,o,d,c,m,x,u,g,p,y;const[b,h]=r.useState("all"),[v,f]=r.useState(a),[j,N]=r.useState(null),[k,S]=r.useState(!1),[C,w]=r.useState(!1),[I,L]=r.useState(null),T="all"===b?v:v.filter(e=>e.type===b),D=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"inactive":default:return"text-gray-600 bg-gray-100";case"error":return"text-red-600 bg-red-100"}},P=e=>{switch(e){case"active":return"ri-check-circle-line";case"inactive":return"ri-pause-circle-line";case"error":return"ri-error-warning-line";default:return"ri-question-line"}},U=e=>{if(!e)return"Never";const r=new Date(e);return r.toLocaleDateString()+" "+r.toLocaleTimeString()};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Integrations & LTI Tools"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage external integrations and tools"})]}),e.jsxs(n,{variant:"brand",onClick:()=>S(!0),children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Add Integration"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:t.map(r=>{const n=v.filter(e=>e.type===r.key).length,i=v.filter(e=>e.type===r.key&&"active"===e.status).length;return e.jsx(s,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 mr-4",children:e.jsx("i",{className:`${r.icon} text-xl ${r.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:r.label}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[i,"/",n]})]})]})},r.key)})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>h("all"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("all"===b?"border-brand-primary text-brand-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["All (",v.length,")"]}),t.map(r=>e.jsxs("button",{onClick:()=>h(r.key),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 flex items-center "+(b===r.key?"border-brand-primary text-brand-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.jsx("i",{className:`${r.icon} mr-2 ${r.color}`}),r.label," (",v.filter(e=>e.type===r.key).length,")"]},r.key))]})}),e.jsx("div",{className:"grid gap-6",children:T.map(r=>{const i=t.find(e=>e.key===r.type);return e.jsx(s,{className:"p-6 hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50",children:e.jsx("i",{className:`${null==i?void 0:i.icon} text-xl ${null==i?void 0:i.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.name}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(r.status)}`,children:[e.jsx("i",{className:`${P(r.status)} mr-1`}),r.status]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:r.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["Provider: ",r.provider]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Last sync: ",U(r.lastSync)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(n,{variant:"secondary",size:"sm",onClick:()=>{N(r),S(!0)},children:[e.jsx("i",{className:"ri-settings-line mr-2"}),"Configure"]}),e.jsx(n,{variant:"active"===r.status?"danger-outline":"brand-outline",size:"sm",onClick:()=>{return e=r.id,void f(r=>r.map(r=>{if(r.id===e){const e="active"===r.status?"inactive":"active";return{...r,status:e}}return r}));var e},children:"active"===r.status?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-pause-line mr-2"}),"Disable"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-play-line mr-2"}),"Enable"]})}),e.jsx(n,{variant:"danger-outline",size:"sm",onClick:()=>{N(r),w(!0)},children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})},r.id)})}),e.jsx(i,{isOpen:k,onClose:()=>{S(!1),N(null),L(null)},title:(null==j?void 0:j.id)?`Configure ${j.name}`:"Add New Integration",maxWidth:"2xl",children:e.jsxs("div",{className:"space-y-6",children:[I||(null==j?void 0:j.id)?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Integration Name"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm",value:(null==j?void 0:j.name)||"",onChange:e=>N(r=>r?{...r,name:e.target.value}:null)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provider"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm",value:(null==j?void 0:j.provider)||"",onChange:e=>N(r=>r?{...r,provider:e.target.value}:null)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm",value:(null==j?void 0:j.description)||"",onChange:e=>N(r=>r?{...r,description:e.target.value}:null)})]}),"lti"===(null==j?void 0:j.type)&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"LTI Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LTI Version"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm pr-8",value:(null==(l=j.config)?void 0:l.ltiVersion)||"1.3",onChange:e=>N(r=>r?{...r,config:{...r.config,ltiVersion:e.target.value}}:null),children:[e.jsx("option",{value:"1.1",children:"LTI 1.1"}),e.jsx("option",{value:"1.3",children:"LTI 1.3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deployment ID"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm",value:(null==(o=j.config)?void 0:o.deploymentId)||"",onChange:e=>N(r=>r?{...r,config:{...r.config,deploymentId:e.target.value}}:null),placeholder:"e.g., canvas-123"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Launch URL"}),e.jsx("input",{type:"url",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm",value:(null==(d=j.config)?void 0:d.launchUrl)||"",onChange:e=>N(r=>r?{...r,config:{...r.config,launchUrl:e.target.value}}:null),placeholder:"https://your-lms.com/api/lti/launch"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consumer Key"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm",value:(null==(c=j.config)?void 0:c.consumerKey)||"",onChange:e=>N(r=>r?{...r,config:{...r.config,consumerKey:e.target.value}}:null)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shared Secret"}),e.jsx("input",{type:"password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm",value:(null==(m=j.config)?void 0:m.sharedSecret)||"",onChange:e=>N(r=>r?{...r,config:{...r.config,sharedSecret:e.target.value}}:null)})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-information-line text-blue-600 mr-2 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"LTI Integration Setup:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-700",children:[e.jsx("li",{children:"Configure your LMS to use this tool with the provided consumer key"}),e.jsx("li",{children:"Set the launch URL in your LMS configuration"}),e.jsx("li",{children:"Ensure grade passback is enabled if needed"}),e.jsx("li",{children:"Test the integration before activating"})]})]})]})})]})}),"sso"===(null==j?void 0:j.type)&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"SSO Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client ID"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm",value:(null==(x=j.config)?void 0:x.clientId)||"",onChange:e=>N(r=>r?{...r,config:{...r.config,clientId:e.target.value}}:null)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Domain"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm",value:(null==(u=j.config)?void 0:u.domain)||"",onChange:e=>N(r=>r?{...r,config:{...r.config,domain:e.target.value}}:null)})]})]})]})}),"webhook"===(null==j?void 0:j.type)&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Webhook Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Webhook URL"}),e.jsx("input",{type:"url",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm",value:(null==(g=j.config)?void 0:g.endpoint)||"",onChange:e=>N(r=>r?{...r,config:{...r.config,endpoint:e.target.value}}:null)})]})]})}),"payment"===(null==j?void 0:j.type)&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),e.jsx("input",{type:"password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm",value:(null==(p=j.config)?void 0:p.apiKey)||"",onChange:e=>N(r=>r?{...r,config:{...r.config,apiKey:e.target.value}}:null)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm pr-8",value:(null==(y=j.config)?void 0:y.currency)||"USD",onChange:e=>N(r=>r?{...r,config:{...r.config,currency:e.target.value}}:null),children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]})]})]})})]}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map(r=>e.jsx("button",{onClick:()=>(e=>{L(e);const r={type:e,status:"inactive",config:{}};switch(e){case"lti":r.name="New LTI Integration",r.provider="Custom LMS",r.description="Learning Tools Interoperability integration",r.config={ltiVersion:"1.3",consumerKey:"",sharedSecret:"",launchUrl:"",deploymentId:""};break;case"sso":r.name="New SSO Integration",r.provider="Custom SSO",r.description="Single Sign-On integration",r.config={clientId:"",clientSecret:"",domain:"",redirectUri:""};break;case"payment":r.name="New Payment Integration",r.provider="Payment Gateway",r.description="Payment processing integration",r.config={apiKey:"",merchantId:"",currency:"USD",mode:"test"};break;case"webhook":r.name="New Webhook Integration",r.provider="Custom Webhook",r.description="External webhook integration",r.config={endpoint:"",secret:"",events:[]}}N(r)})(r.key),className:"p-6 border-2 border-gray-200 rounded-lg hover:border-brand-primary hover:bg-brand-50 transition-all duration-200 text-left",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:`${r.icon} text-2xl ${r.color}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:r.label}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["sso"===r.key&&"Single Sign-On providers","payment"===r.key&&"Payment processors","lti"===r.key&&"Learning Tools Interoperability","webhook"===r.key&&"External webhooks"]})]})]})},r.key))}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx(n,{variant:"secondary",onClick:()=>{S(!1),N(null),L(null)},children:"Cancel"}),(I||(null==j?void 0:j.id))&&e.jsx(n,{variant:"brand",onClick:()=>{if(j)if(j.id)f(e=>e.map(e=>e.id===j.id?j:e));else{const e={...j,id:Date.now().toString()};f(r=>[...r,e])}S(!1),N(null),L(null)},children:(null==j?void 0:j.id)?"Save Changes":"Add Integration"})]})]})}),e.jsx(i,{isOpen:C,onClose:()=>{w(!1),N(null)},title:"Delete Integration",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete ",e.jsx("strong",{children:null==j?void 0:j.name}),"? This action cannot be undone and may affect connected services."]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx(n,{variant:"secondary",onClick:()=>{w(!1),N(null)},children:"Cancel"}),e.jsx(n,{variant:"danger",onClick:()=>{return j&&(e=j.id,f(r=>r.filter(r=>r.id!==e)),w(!1),void N(null));var e},children:"Delete Integration"})]})]})})]})}export{l as default};
