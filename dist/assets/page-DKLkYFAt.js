import{j as e}from"./index-tBdcIxzk.js";import{r}from"./vendor-D_DxLZN2.js";import{M as t}from"./Modal-DDvsaOV2.js";import{D as s}from"./dataService-7pESmbQL.js";import{supabase as l}from"./supabase-DCVaQTjR.js";import"./router-BPhEMSNK.js";import"./supabase-BMSNwJ-5.js";const a=()=>{const[a,i]=r.useState(""),[n,o]=r.useState("all"),[c,d]=r.useState(!1),[u,x]=r.useState(!1),[m,g]=r.useState(null),[b,p]=r.useState(1),[h,v]=r.useState(null),[j,y]=r.useState([]),[f,N]=r.useState([]),[w,C]=r.useState(!0),[k,S]=r.useState({totalCourses:0,activeCourses:0,totalEnrollments:0,totalRevenue:0}),[_,E]=r.useState(""),[q,D]=r.useState(""),[M,L]=r.useState({title:"",description:"",category:"",instructor_id:"",price:"",duration:"",difficulty:"beginner",objectives:[""],requirements:[""],tags:"",thumbnail:null});r.useEffect(()=>{const e=async()=>{try{C(!0),E(""),console.log("ðŸ”„ Fetching courses...");const[e,r,t]=await Promise.all([s.getCourses(),s.getEnrollments(),s.getProfiles("mentor")]);console.log("ðŸ“š Courses fetched:",e),console.log("ðŸ‘¥ Enrollments fetched:",r),console.log("ðŸŽ“ Mentors fetched:",t);const l=e.map(e=>{const t=r.filter(r=>r.course_id===e.id),s=t.filter(e=>e.completed_at);return{...e,students:t.length,completion:t.length>0?Math.round(s.length/t.length*100):0,revenue:t.length*(e.price||0),rating:4.5+.5*Math.random(),status:"active",requirements:["Basic programming knowledge"],tags:e.category,thumbnail:null}});console.log("âœ¨ Enhanced courses:",l),y(l),N(t);const a=r.length,i=r.reduce((r,t)=>{const s=e.find(e=>e.id===t.course_id);return r+((null==s?void 0:s.price)||0)},0);S({totalCourses:e.length,activeCourses:e.filter(e=>"active"===e.status).length,totalEnrollments:a,totalRevenue:i}),console.log("ðŸ“Š Stats updated:",{totalCourses:e.length,activeCourses:e.filter(e=>"active"===e.status).length,totalEnrollments:a,totalRevenue:i})}catch(e){console.error("âŒ Error fetching courses:",e),E("Failed to load courses. Please try again.")}finally{C(!1)}};e();const r=l.channel("courses_changes").on("postgres_changes",{event:"*",schema:"public",table:"courses"},r=>{console.log("ðŸ”„ Courses table changed:",r),e()}).on("postgres_changes",{event:"*",schema:"public",table:"enrollments"},r=>{console.log("ðŸ”„ Enrollments table changed:",r),e()}).subscribe();return()=>{r.unsubscribe()}},[]);const P=["Web Development","Frontend","Backend","Programming","Data Science","Mobile","DevOps","Machine Learning","Cybersecurity","UI/UX Design","AI/ML","Cloud Computing"],F=Math.ceil(j.length/6),I=j.filter(e=>{var r,t,s;const l=e.title.toLowerCase().includes(a.toLowerCase())||(null==(t=null==(r=e.instructor)?void 0:r.name)?void 0:t.toLowerCase().includes(a.toLowerCase()))||(null==(s=e.description)?void 0:s.toLowerCase().includes(a.toLowerCase())),i="all"===n||e.category===n;return l&&i}),A=I.slice(6*(b-1),6*b),B=async(e,r)=>{v(null);try{switch(e){case"view":console.log("Viewing course:",r);break;case"edit":const e=j.find(e=>e.id===r);e&&W(e);break;case"duplicate":const t=j.find(e=>e.id===r);t&&await V(t);break;case"archive":await X(r);break;case"delete":window.confirm("Are you sure you want to delete this course? This action cannot be undone.")&&await G(r)}}catch(t){console.error("Error performing course action:",t),E(`Failed to ${e} course. Please try again.`)}},W=e=>{var r,t;g(e),L({title:e.title,description:e.description||`Learn ${e.title.toLowerCase()} with comprehensive hands-on projects and real-world applications.`,category:e.category,instructor_id:e.instructor_id||"",price:(null==(r=e.price)?void 0:r.toString())||"",duration:(null==(t=e.duration_hours)?void 0:t.toString())||e.duration||"",difficulty:e.level||"intermediate",objectives:e.objectives||["Master the core concepts and fundamentals","Build practical projects from scratch","Apply best practices and industry standards","Prepare for real-world development scenarios"],requirements:e.requirements||["Basic understanding of programming concepts","Computer with internet connection","Willingness to learn and practice"],tags:e.tags||e.category.toLowerCase().replace(" ","-")+", programming, development",thumbnail:null}),x(!0)},R=(e,r)=>{L(t=>({...t,[e]:r}))},T=(e,r)=>{const t=[...M.objectives];t[e]=r,L(e=>({...e,objectives:t}))},O=()=>{L(e=>({...e,objectives:[...e.objectives,""]}))},$=e=>{if(M.objectives.length>1){const r=M.objectives.filter((r,t)=>t!==e);L(e=>({...e,objectives:r}))}},U=(e,r)=>{const t=[...M.requirements];t[e]=r,L(e=>({...e,requirements:t}))},z=()=>{L(e=>({...e,requirements:[...e.requirements,""]}))},H=e=>{if(M.requirements.length>1){const r=M.requirements.filter((r,t)=>t!==e);L(e=>({...e,requirements:r}))}},V=async e=>{try{const r={title:`${e.title} (Copy)`,description:e.description,category:e.category,instructor_id:e.instructor_id,price:e.price,duration_hours:e.duration_hours||0,level:e.level||"beginner"};await s.createCourse(r),D("Course duplicated successfully!")}catch(r){console.error("Error duplicating course:",r),E("Failed to duplicate course. Please try again.")}},X=async e=>{try{await s.updateCourse(e.toString(),{status:"archived"}),D("Course archived successfully!")}catch(r){console.error("Error archiving course:",r),E("Failed to archive course. Please try again.")}},G=async e=>{try{await s.deleteCourse(e.toString()),D("Course deleted successfully!")}catch(r){console.error("Error deleting course:",r),E("Failed to delete course. Please try again.")}},J=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"draft":return"text-yellow-600 bg-yellow-100";case"paused":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}};return r.useEffect(()=>{if(q||_){const e=setTimeout(()=>{D(""),E("")},3e3);return()=>clearTimeout(e)}},[q,_]),w&&0===j.length?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-loader-4-line text-4xl text-blue-600 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading courses..."})]})})}):e.jsxs("div",{className:"p-6",children:[q&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-check-circle-line mr-2"}),q]})}),_&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line mr-2"}),_]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Course Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage course content, pricing, and enrollment"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-blue-100 rounded-lg mr-4",children:e.jsx("i",{className:"ri-book-line text-2xl text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Courses"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.totalCourses})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-green-100 rounded-lg mr-4",children:e.jsx("i",{className:"ri-play-circle-line text-2xl text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Courses"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.activeCourses})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-purple-100 rounded-lg mr-4",children:e.jsx("i",{className:"ri-user-line text-2xl text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Enrollments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.totalEnrollments.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-orange-100 rounded-lg mr-4",children:e.jsx("i",{className:"ri-money-rupee-circle-line text-2xl text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Course Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["â‚¹",k.totalRevenue.toLocaleString()]})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-start md:items-center",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search courses...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:n,onChange:e=>o(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm cursor-pointer",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"Web Development",children:"Web Development"}),e.jsx("option",{value:"Frontend",children:"Frontend"}),e.jsx("option",{value:"Backend",children:"Backend"}),e.jsx("option",{value:"Programming",children:"Programming"}),e.jsx("option",{value:"Data Science",children:"Data Science"}),e.jsx("option",{value:"Mobile",children:"Mobile"})]}),e.jsx("i",{className:"ri-arrow-down-s-line absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>window.location.reload(),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:()=>{d(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Create Course"]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:A.map(r=>{var t,s,l;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"h-48 bg-gradient-to-br from-blue-500 to-purple-600 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l=r.category,{"Web Development":"text-blue-600 bg-blue-100",Frontend:"text-green-600 bg-green-100",Backend:"text-purple-600 bg-purple-100",Programming:"text-orange-600 bg-orange-100","Data Science":"text-red-600 bg-red-100",Mobile:"text-indigo-600 bg-indigo-100",DevOps:"text-cyan-600 bg-cyan-100","Machine Learning":"text-pink-600 bg-pink-100",Cybersecurity:"text-red-700 bg-red-100","UI/UX Design":"text-purple-600 bg-purple-100","AI/ML":"text-blue-700 bg-blue-100","Cloud Computing":"text-sky-600 bg-sky-100"}[l]||"text-gray-600 bg-gray-100"}`,children:r.category})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${J(r.status)}`,children:r.status})}),e.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:r.title}),e.jsxs("p",{className:"text-sm opacity-90",children:["by ",(null==(t=r.instructor)?void 0:t.name)||"Unknown Instructor"]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.students}),e.jsx("div",{className:"text-sm text-gray-600",children:"Students"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.price}),e.jsx("div",{className:"text-sm text-gray-600",children:"Price"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-time-line text-gray-400 mr-1"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[r.duration_hours||r.duration," hours"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-star-fill text-yellow-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-600",children:(null==(s=r.rating)?void 0:s.toFixed(1))||"4.5"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"Completion Rate"}),e.jsxs("span",{children:[r.completion,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${r.completion}%`}})})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Revenue"}),e.jsx("span",{className:"font-semibold text-green-600",children:r.revenue})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>(e=>{const r=j.find(r=>r.id===e);r&&W(r)})(r.id),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>{return e=r.id,void v(h===e?null:e);var e},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-more-line text-gray-600"})}),h===r.id&&e.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:()=>B("view",r.id),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer",children:[e.jsx("i",{className:"ri-eye-line mr-2"}),"View Details"]}),e.jsxs("button",{onClick:()=>B("edit",r.id),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer",children:[e.jsx("i",{className:"ri-edit-line mr-2"}),"Edit Course"]}),e.jsxs("button",{onClick:()=>B("duplicate",r.id),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer",children:[e.jsx("i",{className:"ri-file-copy-line mr-2"}),"Duplicate"]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>B("archive",r.id),className:"w-full text-left px-4 py-2 text-sm text-orange-600 hover:bg-orange-50 cursor-pointer",children:[e.jsx("i",{className:"ri-archive-line mr-2"}),"Archive"]}),e.jsxs("button",{onClick:()=>B("delete",r.id),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 cursor-pointer",children:[e.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Delete"]})]})})]})]})]})]},r.id)})}),e.jsxs("div",{className:"mt-8 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",Math.min(6*(b-1)+1,I.length)," to ",Math.min(6*b,I.length)," of ",I.length," courses"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{p(e=>Math.max(1,e-1))},disabled:1===b,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 cursor-pointer whitespace-nowrap "+(1===b?"opacity-50 cursor-not-allowed":""),children:"Previous"}),Array.from({length:F},(e,r)=>r+1).map(r=>e.jsx("button",{onClick:()=>(e=>{p(e)})(r),className:"px-3 py-2 rounded-lg text-sm cursor-pointer whitespace-nowrap "+(b===r?"bg-blue-600 text-white hover:bg-blue-700":"border border-gray-300 hover:bg-gray-50"),children:r},r)),e.jsx("button",{onClick:()=>{p(e=>Math.min(F,e-1))},disabled:b===F,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 cursor-pointer whitespace-nowrap "+(b===F?"opacity-50 cursor-not-allowed":""),children:"Next"})]})]}),h&&e.jsx("div",{className:"fixed inset-0 z-5",onClick:()=>v(null)}),e.jsx(t,{isOpen:c,onClose:()=>d(!1),title:"Create New Course",maxWidth:"4xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Title *"}),e.jsx("input",{type:"text",value:M.title,onChange:e=>R("title",e.target.value),placeholder:"Enter course title",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsxs("select",{value:M.category,onChange:e=>R("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Select Category"}),P.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructor *"}),e.jsxs("select",{value:M.instructor_id,onChange:e=>R("instructor_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Select Instructor"}),f.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level *"}),e.jsxs("select",{value:M.difficulty,onChange:e=>R("difficulty",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (Hours) *"}),e.jsx("input",{type:"number",value:M.duration,onChange:e=>R("duration",e.target.value),placeholder:"e.g., 40",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price *"}),e.jsx("input",{type:"text",value:M.price,onChange:e=>R("price",e.target.value),placeholder:"e.g., â‚¹2999, Free",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Description *"}),e.jsx("textarea",{rows:4,value:M.description,onChange:e=>R("description",e.target.value),placeholder:"Describe what students will learn in this course...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Learning Objectives"}),e.jsxs("div",{className:"space-y-2",children:[M.objectives.map((r,t)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:r,onChange:e=>T(t,e.target.value),placeholder:"What will students learn?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),M.objectives.length>1&&e.jsx("button",{type:"button",onClick:()=>$(t),className:"text-red-600 hover:text-red-700 cursor-pointer",children:e.jsx("i",{className:"ri-delete-bin-line"})})]},t)),e.jsxs("button",{type:"button",onClick:O,className:"text-blue-600 hover:text-blue-700 text-sm cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-1"}),"Add Objective"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prerequisites"}),e.jsxs("div",{className:"space-y-2",children:[M.requirements.map((r,t)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:r,onChange:e=>U(t,e.target.value),placeholder:"What should students know before taking this course?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),M.requirements.length>1&&e.jsx("button",{type:"button",onClick:()=>H(t),className:"text-red-600 hover:text-red-700 cursor-pointer",children:e.jsx("i",{className:"ri-delete-bin-line"})})]},t)),e.jsxs("button",{type:"button",onClick:z,className:"text-blue-600 hover:text-blue-700 text-sm cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-1"}),"Add Requirement"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),e.jsx("input",{type:"text",value:M.tags,onChange:e=>R("tags",e.target.value),placeholder:"javascript, react, frontend, web development (comma separated)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors cursor-pointer whitespace-nowrap",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:async()=>{try{if(C(!0),E(""),!M.title||!M.category||!M.instructor_id)return void E("Please fill in all required fields.");const e={title:M.title,description:M.description,category:M.category,instructor_id:M.instructor_id,price:parseFloat(M.price)||0,duration_hours:parseInt(M.duration)||0,level:M.difficulty};console.log("Creating course with data:",e);const r=await s.createCourse(e);console.log("âœ… Course created successfully:",r),D("Course created successfully!"),L({title:"",description:"",category:"",instructor_id:"",price:"",duration:"",difficulty:"beginner",objectives:[""],requirements:[""],tags:"",thumbnail:null}),d(!1),setTimeout(()=>{window.location.reload()},1e3)}catch(e){console.error("Error creating course:",e),E(`Failed to create course: ${e instanceof Error?e.message:"Unknown error"}`)}finally{C(!1)}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Create Course"]})]})]})}),e.jsx(t,{isOpen:u,onClose:()=>{x(!1),g(null)},title:`Edit Course: ${(null==m?void 0:m.title)||""}`,maxWidth:"4xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Title *"}),e.jsx("input",{type:"text",value:M.title,onChange:e=>R("title",e.target.value),placeholder:"Enter course title",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsxs("select",{value:M.category,onChange:e=>R("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Select Category"}),P.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructor *"}),e.jsxs("select",{value:M.instructor_id,onChange:e=>R("instructor_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Select Instructor"}),f.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level *"}),e.jsxs("select",{value:M.difficulty,onChange:e=>R("difficulty",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (Hours) *"}),e.jsx("input",{type:"number",value:M.duration,onChange:e=>R("duration",e.target.value),placeholder:"e.g., 40",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price *"}),e.jsx("input",{type:"text",value:M.price,onChange:e=>R("price",e.target.value),placeholder:"e.g., â‚¹2999, Free",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Description *"}),e.jsx("textarea",{rows:4,value:M.description,onChange:e=>R("description",e.target.value),placeholder:"Describe what students will learn in this course...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Learning Objectives"}),e.jsxs("div",{className:"space-y-2",children:[M.objectives.map((r,t)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:r,onChange:e=>T(t,e.target.value),placeholder:"What will students learn?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),M.objectives.length>1&&e.jsx("button",{type:"button",onClick:()=>$(t),className:"text-red-600 hover:text-red-700 cursor-pointer",children:e.jsx("i",{className:"ri-delete-bin-line"})})]},t)),e.jsxs("button",{type:"button",onClick:O,className:"text-blue-600 hover:text-blue-700 text-sm cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-1"}),"Add Objective"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prerequisites"}),e.jsxs("div",{className:"space-y-2",children:[M.requirements.map((r,t)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:r,onChange:e=>U(t,e.target.value),placeholder:"What should students know before taking this course?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),M.requirements.length>1&&e.jsx("button",{type:"button",onClick:()=>H(t),className:"text-red-600 hover:text-red-700 cursor-pointer",children:e.jsx("i",{className:"ri-delete-bin-line"})})]},t)),e.jsxs("button",{type:"button",onClick:z,className:"text-blue-600 hover:text-blue-700 text-sm cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-1"}),"Add Requirement"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),e.jsx("input",{type:"text",value:M.tags,onChange:e=>R("tags",e.target.value),placeholder:"javascript, react, frontend, web development (comma separated)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{x(!1),g(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors cursor-pointer whitespace-nowrap",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:async()=>{try{if(C(!0),E(""),!m)return;const e={title:M.title,description:M.description,category:M.category,instructor_id:M.instructor_id,price:parseFloat(M.price)||0,duration_hours:parseInt(M.duration)||0,level:M.difficulty};await s.updateCourse(m.id.toString(),e),D("Course updated successfully!"),L({title:"",description:"",category:"",instructor_id:"",price:"",duration:"",difficulty:"beginner",objectives:[""],requirements:[""],tags:"",thumbnail:null}),x(!1),g(null)}catch(e){console.error("Error updating course:",e),E("Failed to update course. Please try again.")}finally{C(!1)}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Update Course"]})]})]})})]})};export{a as default};
