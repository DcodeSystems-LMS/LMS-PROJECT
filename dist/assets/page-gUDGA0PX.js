import{j as e}from"./index-tBdcIxzk.js";import{r as s}from"./vendor-D_DxLZN2.js";import{b as r,a as t}from"./router-BPhEMSNK.js";import{supabase as a}from"./supabase-DCVaQTjR.js";import{B as o}from"./Button-q_HxaLrT.js";import{C as n}from"./Card-CCr5q94u.js";import"./supabase-BMSNwJ-5.js";const l=()=>{const[l,d]=s.useState(""),[c,i]=s.useState(""),[m,u]=s.useState(!1),[x,p]=s.useState(""),[f,h]=s.useState(!1),[b]=r(),g=t();s.useEffect(()=>{const e=b.get("access_token"),s=b.get("refresh_token");e&&s||p("Invalid or expired reset link. Please request a new password reset.")},[b]);return f?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx(n,{className:"max-w-md w-full space-y-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-green-600",children:e.jsx("i",{className:"ri-check-line text-4xl"})}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Password Reset Successful"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your password has been updated successfully. Redirecting to sign in..."})]})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs(n,{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Reset Your Password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your new password below"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async e=>{if(e.preventDefault(),l===c)if(l.length<6)p("Password must be at least 6 characters long");else{u(!0),p("");try{const{error:e}=await a.auth.updateUser({password:l});e?p(e.message):(h(!0),setTimeout(()=>{g("/auth/signin")},2e3))}catch(s){p("An unexpected error occurred")}finally{u(!1)}}else p("Passwords do not match")},children:[x&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:x}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:l,onChange:e=>d(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:c,onChange:e=>i(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirm new password"})]})]}),e.jsx("div",{children:e.jsx(o,{type:"submit",disabled:m,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:m?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line mr-2 animate-spin"}),"Updating Password..."]}):"Update Password"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>g("/auth/signin"),className:"text-sm text-blue-600 hover:text-blue-500",children:"Back to Sign In"})})]})]})})};export{l as default};
