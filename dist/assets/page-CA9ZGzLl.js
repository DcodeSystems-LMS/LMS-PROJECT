import{j as e}from"./index-BaWXG3YY.js";import{r as n,b as t}from"./vendor-D_DxLZN2.js";import{B as r}from"./Button-lmmCuxjA.js";import"./router-BbFJyaaj.js";import"./supabase-DnW1kxsT.js";function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach(function(n){o(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach(function(n){u(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function m(e){return function n(){for(var t=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n.apply(t,[].concat(o,r))}}}function p(e){return{}.toString.call(e).includes("Object")}function h(e){return"function"==typeof e}var f=m(function(e,n){throw new Error(e[n]||e.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),g={changes:function(e,n){return p(n)||f("changeType"),Object.keys(n).some(function(n){return t=e,r=n,!Object.prototype.hasOwnProperty.call(t,r);var t,r})&&f("changeField"),n},selector:function(e){h(e)||f("selectorType")},handler:function(e){h(e)||p(e)||f("handlerType"),p(e)&&Object.values(e).some(function(e){return!h(e)})&&f("handlersType")},initial:function(e){var n;e||f("initialIsRequired"),p(e)||f("initialType"),n=e,Object.keys(n).length||f("initialContent")}};function y(e,n){return h(n)?n(e.current):n}function x(e,n){return e.current=d(d({},e.current),n),n}function w(e,n,t){return h(n)?n(e.current):Object.keys(t).forEach(function(t){var r;return null===(r=n[t])||void 0===r?void 0:r.call(n,e.current[t])}),t}var v={create:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g.initial(e),g.handler(n);var t={current:e},r=m(w)(t,n),o=m(x)(t),a=m(g.changes)(e),i=m(y)(t);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return g.selector(e),e(t.current)},function(e){!function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){return n.reduceRight(function(e,n){return n(e)},e)}}(r,o,a,i)(e)}]}};var b,C={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},j=(b=function(e,n){throw new Error(e[n]||e.default)},function e(){for(var n=this,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return r.length>=b.length?b.apply(this,r):function(){for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e.apply(n,[].concat(r,o))}})(C),S={config:function(e){var n;return e||j("configIsRequired"),n=e,{}.toString.call(n).includes("Object")||j("configType"),e.urls?(console.warn(C.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};function E(e,n){return Object.keys(n).forEach(function(t){n[t]instanceof Object&&e[t]&&Object.assign(n[t],E(e[t],n[t]))}),i(i({},e),n)}var _={type:"cancelation",msg:"operation is manually canceled"};function O(e){var n=!1,t=new Promise(function(t,r){e.then(function(e){return n?r(_):t(e)}),e.catch(r)});return t.cancel=function(){return n=!0},t}var k,M,N=v.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),$=(M=2,function(e){if(Array.isArray(e))return e}(k=N)||function(e,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(l){o=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return t}}(k,M)||function(e,n){if(e){if("string"==typeof e)return l(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,n):void 0}}(k,M)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),I=$[0],P=$[1];function R(e){return document.body.appendChild(e)}function L(e){var n,t,r=I(function(e){return{config:e.config,reject:e.reject}}),o=(n="".concat(r.config.paths.vs,"/loader.js"),t=document.createElement("script"),n&&(t.src=n),t);return o.onload=function(){return e()},o.onerror=r.reject,o}function T(){var e=I(function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}}),n=window.require;n.config(e.config),n(["vs/editor/editor.main"],function(n){H(n),e.resolve(n)},function(n){e.reject(n)})}function H(e){I().monaco||P({monaco:e})}var D=new Promise(function(e,n){return P({resolve:e,reject:n})}),q={config:function(e){var n=S.config(e),t=n.monaco,r=s(n,["monaco"]);P(function(e){return{config:E(e.config,r),monaco:t}})},init:function(){var e=I(function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}});if(!e.isInitialized){if(P({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),O(D);if(window.monaco&&window.monaco.editor)return H(window.monaco),e.resolve(window.monaco),O(D);!function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){return n.reduceRight(function(e,n){return n(e)},e)}}(R,L)(T)}return O(D)},__getMonacoInstance:function(){return I(function(e){return e.monaco})}},A={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},U={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}};var W=function({children:e}){return t.createElement("div",{style:U.container},e)};var J=function({width:e,height:n,isEditorReady:r,loading:o,_ref:a,className:i,wrapperProps:s}){return t.createElement("section",{style:{...A.wrapper,width:e,height:n},...s},!r&&t.createElement(W,null,o),t.createElement("div",{ref:a,style:{...A.fullWidth,...!r&&A.hide},className:i}))},z=n.memo(J);var B=function(e){n.useEffect(e,[])};var F=function(e,t,r=!0){let o=n.useRef(!0);n.useEffect(o.current||!r?()=>{o.current=!1}:e,t)};function V(){}function K(e,n,t,r){return function(e,n){return e.editor.getModel(Y(e,n))}(e,r)||function(e,n,t,r){return e.editor.createModel(n,t,r?Y(e,r):void 0)}(e,n,t,r)}function Y(e,n){return e.Uri.parse(n)}var G=function({original:e,modified:r,language:o,originalLanguage:a,modifiedLanguage:i,originalModelPath:s,modifiedModelPath:l,keepCurrentOriginalModel:u=!1,keepCurrentModifiedModel:c=!1,theme:d="light",loading:m="Loading...",options:p={},height:h="100%",width:f="100%",className:g,wrapperProps:y={},beforeMount:x=V,onMount:w=V}){let[v,b]=n.useState(!1),[C,j]=n.useState(!0),S=n.useRef(null),E=n.useRef(null),_=n.useRef(null),O=n.useRef(w),k=n.useRef(x),M=n.useRef(!1);B(()=>{let e=q.init();return e.then(e=>(E.current=e)&&j(!1)).catch(e=>"cancelation"!==(null==e?void 0:e.type)&&console.error("Monaco initialization: error:",e)),()=>S.current?function(){var e,n,t,r;let o=null==(e=S.current)?void 0:e.getModel();u||null==(n=null==o?void 0:o.original)||n.dispose(),c||null==(t=null==o?void 0:o.modified)||t.dispose(),null==(r=S.current)||r.dispose()}():e.cancel()}),F(()=>{if(S.current&&E.current){let n=S.current.getOriginalEditor(),t=K(E.current,e||"",a||o||"text",s||"");t!==n.getModel()&&n.setModel(t)}},[s],v),F(()=>{if(S.current&&E.current){let e=S.current.getModifiedEditor(),n=K(E.current,r||"",i||o||"text",l||"");n!==e.getModel()&&e.setModel(n)}},[l],v),F(()=>{let e=S.current.getModifiedEditor();e.getOption(E.current.editor.EditorOption.readOnly)?e.setValue(r||""):r!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),e.pushUndoStop())},[r],v),F(()=>{var n,t;null==(t=null==(n=S.current)?void 0:n.getModel())||t.original.setValue(e||"")},[e],v),F(()=>{let{original:e,modified:n}=S.current.getModel();E.current.editor.setModelLanguage(e,a||o||"text"),E.current.editor.setModelLanguage(n,i||o||"text")},[o,a,i],v),F(()=>{var e;null==(e=E.current)||e.editor.setTheme(d)},[d],v),F(()=>{var e;null==(e=S.current)||e.updateOptions(p)},[p],v);let N=n.useCallback(()=>{var n;if(!E.current)return;k.current(E.current);let t=K(E.current,e||"",a||o||"text",s||""),u=K(E.current,r||"",i||o||"text",l||"");null==(n=S.current)||n.setModel({original:t,modified:u})},[o,r,i,e,a,s,l]),$=n.useCallback(()=>{var e;!M.current&&_.current&&(S.current=E.current.editor.createDiffEditor(_.current,{automaticLayout:!0,...p}),N(),null==(e=E.current)||e.editor.setTheme(d),b(!0),M.current=!0)},[p,d,N]);return n.useEffect(()=>{v&&O.current(S.current,E.current)},[v]),n.useEffect(()=>{!C&&!v&&$()},[C,v,$]),t.createElement(z,{width:f,height:h,isEditorReady:v,loading:m,_ref:_,className:g,wrapperProps:y})};n.memo(G);var Z=function(e){let t=n.useRef();return n.useEffect(()=>{t.current=e},[e]),t.current},X=new Map;var Q=function({defaultValue:e,defaultLanguage:r,defaultPath:o,value:a,language:i,path:s,theme:l="light",line:u,loading:c="Loading...",options:d={},overrideServices:m={},saveViewState:p=!0,keepCurrentModel:h=!1,width:f="100%",height:g="100%",className:y,wrapperProps:x={},beforeMount:w=V,onMount:v=V,onChange:b,onValidate:C=V}){let[j,S]=n.useState(!1),[E,_]=n.useState(!0),O=n.useRef(null),k=n.useRef(null),M=n.useRef(null),N=n.useRef(v),$=n.useRef(w),I=n.useRef(),P=n.useRef(a),R=Z(s),L=n.useRef(!1),T=n.useRef(!1);B(()=>{let e=q.init();return e.then(e=>(O.current=e)&&_(!1)).catch(e=>"cancelation"!==(null==e?void 0:e.type)&&console.error("Monaco initialization: error:",e)),()=>{return k.current?(null==(n=I.current)||n.dispose(),h?p&&X.set(s,k.current.saveViewState()):null==(t=k.current.getModel())||t.dispose(),void k.current.dispose()):e.cancel();var n,t}}),F(()=>{var n,t,l,u;let c=K(O.current,e||a||"",r||i||"",s||o||"");c!==(null==(n=k.current)?void 0:n.getModel())&&(p&&X.set(R,null==(t=k.current)?void 0:t.saveViewState()),null==(l=k.current)||l.setModel(c),p&&(null==(u=k.current)||u.restoreViewState(X.get(s))))},[s],j),F(()=>{var e;null==(e=k.current)||e.updateOptions(d)},[d],j),F(()=>{!k.current||void 0===a||(k.current.getOption(O.current.editor.EditorOption.readOnly)?k.current.setValue(a):a!==k.current.getValue()&&(T.current=!0,k.current.executeEdits("",[{range:k.current.getModel().getFullModelRange(),text:a,forceMoveMarkers:!0}]),k.current.pushUndoStop(),T.current=!1))},[a],j),F(()=>{var e,n;let t=null==(e=k.current)?void 0:e.getModel();t&&i&&(null==(n=O.current)||n.editor.setModelLanguage(t,i))},[i],j),F(()=>{var e;void 0!==u&&(null==(e=k.current)||e.revealLine(u))},[u],j),F(()=>{var e;null==(e=O.current)||e.editor.setTheme(l)},[l],j);let H=n.useCallback(()=>{var n;if(M.current&&O.current&&!L.current){$.current(O.current);let t=s||o,c=K(O.current,a||e||"",r||i||"",t||"");k.current=null==(n=O.current)?void 0:n.editor.create(M.current,{model:c,automaticLayout:!0,...d},m),p&&k.current.restoreViewState(X.get(t)),O.current.editor.setTheme(l),void 0!==u&&k.current.revealLine(u),S(!0),L.current=!0}},[e,r,o,a,i,s,d,m,p,l,u]);return n.useEffect(()=>{j&&N.current(k.current,O.current)},[j]),n.useEffect(()=>{!E&&!j&&H()},[E,j,H]),P.current=a,n.useEffect(()=>{var e,n;j&&b&&(null==(e=I.current)||e.dispose(),I.current=null==(n=k.current)?void 0:n.onDidChangeModelContent(e=>{T.current||b(k.current.getValue(),e)}))},[j,b]),n.useEffect(()=>{if(j){let e=O.current.editor.onDidChangeMarkers(e=>{var n;let t=null==(n=k.current.getModel())?void 0:n.uri;if(t&&e.find(e=>e.path===t.path)){let e=O.current.editor.getModelMarkers({resource:t});null==C||C(e)}});return()=>{null==e||e.dispose()}}return()=>{}},[j,C]),t.createElement(z,{width:f,height:g,isEditorReady:j,loading:c,_ref:M,className:y,wrapperProps:x})},ee=n.memo(Q);
/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ne=e=>{const n=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,t)=>t?t.toUpperCase():n.toLowerCase()))(e);return n.charAt(0).toUpperCase()+n.slice(1)},te=(...e)=>e.filter((e,n,t)=>Boolean(e)&&""!==e.trim()&&t.indexOf(e)===n).join(" ").trim(),re=e=>{for(const n in e)if(n.startsWith("aria-")||"role"===n||"title"===n)return!0};
/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var oe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=n.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:i,iconNode:s,...l},u)=>n.createElement("svg",{ref:u,...oe,width:t,height:t,stroke:e,strokeWidth:o?24*Number(r)/Number(t):r,className:te("lucide",a),...!i&&!re(l)&&{"aria-hidden":"true"},...l},[...s.map(([e,t])=>n.createElement(e,t)),...Array.isArray(i)?i:[i]])),ie=(e,t)=>{const r=n.forwardRef(({className:r,...o},a)=>{return n.createElement(ae,{ref:a,iconNode:t,className:te(`lucide-${i=ne(e),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...o});var i});return r.displayName=ne(e),r},se=ie("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),le=ie("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),ue=ie("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ce=ie("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),de=ie("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),me=ie("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),pe=ie("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);
/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function he({value:r,onValueChange:o,children:a,className:i=""}){const[s,l]=n.useState(!1),u=n.useRef(null);n.useEffect(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&l(!1)};return s&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s]);const c=e=>{console.log("Select handleValueChange called with:",e),o(e),l(!1)};return e.jsx("div",{ref:u,className:`relative ${i}`,children:t.Children.map(a,e=>{if(t.isValidElement(e)){if(e.type===fe)return t.cloneElement(e,{isOpen:s,setIsOpen:l,value:r});if(e.type===ge)return t.cloneElement(e,{isOpen:s,onValueChange:c})}return e})})}function fe({children:n,className:t="",isOpen:r,setIsOpen:o,value:a}){return e.jsxs("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("SelectTrigger clicked, current isOpen:",r),null==o||o(!r)},className:`flex items-center justify-between w-full px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${t}`,children:[n,e.jsx(se,{className:"w-4 h-4 transition-transform "+(r?"rotate-180":"")})]})}function ge({children:n,className:r="",isOpen:o,onValueChange:a}){return console.log("SelectContent render, isOpen:",o),o?e.jsx("div",{className:`absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto ${r}`,children:t.Children.map(n,e=>t.isValidElement(e)&&e.type===ye?t.cloneElement(e,{onClick:a}):e)}):null}function ye({value:n,children:t,className:r="",onClick:o}){return e.jsx("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("SelectItem clicked:",n),null==o||o(n)},className:`px-3 py-2 text-sm cursor-pointer hover:bg-gray-100 ${r}`,children:t})}function xe({placeholder:n,value:t}){return console.log("SelectValue render, value:",t),e.jsx("span",{className:"text-white",children:t||n})}const we=new class{constructor(){this.baseUrl="https://ce.judge0.com"}async executeCode(e,n,t=""){try{if(!n||n<1)throw new Error(`Invalid language ID: ${n}`);if(!e||""===e.trim())throw new Error("Source code cannot be empty");const r={source_code:e,language_id:parseInt(n),stdin:t||"",expected_output:null,cpu_time_limit:null,cpu_extra_time:null,wall_time_limit:null,memory_limit:null,stack_limit:null,max_processes_and_or_threads:null,enable_per_process_and_thread_time_limit:null,enable_per_process_and_thread_memory_limit:null,max_file_size:null,base64_encoded:!1},o=await fetch(`${this.baseUrl}/submissions?base64_encoded=false&wait=true`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok){const e=await o.text();throw console.error("Judge0 API Error Response:",e),new Error(`HTTP error! status: ${o.status} - ${e}`)}const a=await o.json();return this.formatResult(a)}catch(r){throw console.error("Judge0 API Error:",r),new Error(`Failed to execute code: ${r.message}`)}}async executeCodeInteractive(e,n,t="",r=!1){try{if(!n||n<1)throw new Error(`Invalid language ID: ${n}`);if(!e||""===e.trim())throw new Error("Source code cannot be empty");console.log("Judge0 API Request:",{languageId:n,sourceCodeLength:e.length,inputLength:t.length,isInteractive:r});const o={source_code:e,language_id:parseInt(n),stdin:t||"",expected_output:null,cpu_time_limit:null,cpu_extra_time:null,wall_time_limit:null,memory_limit:null,stack_limit:null,max_processes_and_or_threads:null,enable_per_process_and_thread_time_limit:null,enable_per_process_and_thread_memory_limit:null,max_file_size:null,base64_encoded:!1},a=await fetch(`${this.baseUrl}/submissions?base64_encoded=false&wait=true`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok){const e=await a.text();throw console.error("Judge0 API Error Response:",e),new Error(`HTTP error! status: ${a.status} - ${e}`)}const i=await a.json();return console.log("Judge0 API Response:",i),this.formatResult(i,r)}catch(o){throw console.error("Judge0 API Error:",o),new Error(`Failed to execute code: ${o.message}`)}}async executeCodeWithStdin(e,n,t=""){try{const r=await fetch(`${this.baseUrl}/submissions?base64_encoded=false&wait=true`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source_code:e,language_id:n,stdin:t})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const o=await r.json();return this.formatResult(o,!0)}catch(r){throw console.error("Judge0 API Error:",r),new Error("Failed to execute code. Please try again.")}}formatResult(e,n=!1){const{stdout:t,stderr:r,compile_output:o,message:a,status:i,time:s,memory:l}=e,u=i&&3===i.id,c=o&&""!==o.trim(),d=r&&""!==r.trim(),m=t&&""!==t.trim();let p="",h="";return c?h=`Compilation Error:\n${o}`:d?h=`Runtime Error:\n${r}`:a?h=`Error: ${a}`:m?p=t:u?p=n?"":"Program executed successfully (no output)":h="Unknown error occurred",{success:u&&!c&&!d,output:p.trim(),error:h.trim(),time:s||"0",memory:l||"0",status:i?i.description:"Unknown",isInteractive:n,needsInput:n&&u&&!m&&!c&&!d}}async getSupportedLanguages(){try{const e=await fetch(`${this.baseUrl}/languages`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching languages:",e),[]}}async checkApiHealth(){try{return(await fetch(`${this.baseUrl}/languages`)).ok}catch(e){return console.error("Judge0 API health check failed:",e),!1}}},ve=["https://ce.judge0.com","https://judge0-ce.p.rapidapi.com","https://judge0-ce.p.rapidapi.com/submissions"];const be=new class{constructor(){this.currentUrlIndex=0}async executeCode(e,n,t=""){const r=ve.length;for(let a=0;a<r;a++)try{const r=ve[this.currentUrlIndex];console.log(`Attempting execution with ${r} (attempt ${a+1})`);const o=await this.tryExecuteWithUrl(r,e,n,t);if(o.success||o.error)return o;this.currentUrlIndex=(this.currentUrlIndex+1)%ve.length}catch(o){if(console.error(`Execution attempt ${a+1} failed:`,o),a===r-1)throw new Error(`All execution endpoints failed. Last error: ${o.message}`);this.currentUrlIndex=(this.currentUrlIndex+1)%ve.length}throw new Error("All execution endpoints failed")}async tryExecuteWithUrl(e,n,t,r){const o={source_code:n,language_id:parseInt(t),stdin:r||"",expected_output:null,cpu_time_limit:null,cpu_extra_time:null,wall_time_limit:null,memory_limit:null,stack_limit:null,max_processes_and_or_threads:null,enable_per_process_and_thread_time_limit:null,enable_per_process_and_thread_memory_limit:null,max_file_size:null,base64_encoded:!1},a=await fetch(`${e}/submissions?base64_encoded=false&wait=true`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok){const e=await a.text();throw new Error(`HTTP ${a.status}: ${e}`)}const i=await a.json();return this.formatResult(i)}formatResult(e){const{stdout:n,stderr:t,compile_output:r,message:o,status:a,time:i,memory:s}=e,l=a&&3===a.id,u=r&&""!==r.trim(),c=t&&""!==t.trim(),d=n&&""!==n.trim();let m="",p="";return u?p=`Compilation Error:\n${r}`:c?p=`Runtime Error:\n${t}`:o?p=`Error: ${o}`:d?m=n:l?m="Program executed successfully (no output)":p="Unknown error occurred",{success:l&&!u&&!c,output:m.trim(),error:p.trim(),time:i||"0",memory:s||"0",status:a?a.description:"Unknown"}}},Ce={Python:{id:71,name:"Python",extension:"py",monacoLanguage:"python",defaultCode:'# Python Code with full library support\nimport math\nimport random\nimport datetime\nimport json\nimport os\n\nprint("Hello, World!")\n\n# Your code here\nname = input("Enter your name: ")\nprint(f"Hello, {name}!")\n\n# Example with libraries\nprint(f"Random number: {random.randint(1, 100)}")\nprint(f"Square root of 16: {math.sqrt(16)}")\nprint(f"Current time: {datetime.datetime.now()}")'},JavaScript:{id:63,name:"JavaScript",extension:"js",monacoLanguage:"javascript",defaultCode:"// JavaScript Code with full Node.js support\nconst fs = require('fs');\nconst path = require('path');\nconst crypto = require('crypto');\n\nconsole.log(\"Hello, World!\");\n\n// Your code here\nconst readline = require('readline');\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout\n});\n\nrl.question('Enter your name: ', (name) => {\n  console.log(`Hello, ${name}!`);\n  \n  // Example with libraries\n  console.log(`Random number: ${Math.floor(Math.random() * 100)}`);\n  console.log(`Current time: ${new Date()}`);\n  console.log(`Hash of your name: ${crypto.createHash('md5').update(name).digest('hex')}`);\n  \n  rl.close();\n});"},Java:{id:62,name:"Java",extension:"java",monacoLanguage:"java",defaultCode:'// Java Code with full library support\nimport java.util.*;\nimport java.time.*;\nimport java.math.*;\nimport java.security.*;\n\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println("Hello, World!");\n        \n        // Your code here\n        Scanner scanner = new Scanner(System.in);\n        System.out.print("Enter your name: ");\n        String name = scanner.nextLine();\n        System.out.println("Hello, " + name + "!");\n        \n        // Example with libraries\n        Random random = new Random();\n        System.out.println("Random number: " + random.nextInt(100));\n        System.out.println("Current time: " + LocalDateTime.now());\n        System.out.println("Square root of 16: " + Math.sqrt(16));\n        \n        scanner.close();\n    }\n}'},"C++":{id:54,name:"C++",extension:"cpp",monacoLanguage:"cpp",defaultCode:'// C++ Code with full STL support\n#include <iostream>\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <random>\n#include <chrono>\n#include <cmath>\n#include <iomanip>\n\nusing namespace std;\n\nint main() {\n    cout << "Hello, World!" << endl;\n    \n    // Your code here\n    string name;\n    cout << "Enter your name: ";\n    getline(cin, name);\n    cout << "Hello, " << name << "!" << endl;\n    \n    // Example with STL libraries\n    vector<int> numbers = {1, 2, 3, 4, 5};\n    random_device rd;\n    mt19937 gen(rd());\n    uniform_int_distribution<> dis(1, 100);\n    \n    cout << "Random number: " << dis(gen) << endl;\n    cout << "Square root of 16: " << sqrt(16) << endl;\n    cout << "Current time: " << chrono::duration_cast<chrono::milliseconds>(chrono::system_clock::now().time_since_epoch()).count() << " ms" << endl;\n    \n    return 0;\n}'},C:{id:50,name:"C",extension:"c",monacoLanguage:"c",defaultCode:'// C Code\n#include <stdio.h>\n#include <string.h>\n\nint main() {\n    printf("Hello, World!\\n");\n    \n    // Your code here\n    char name[100];\n    printf("Enter your name: ");\n    fgets(name, sizeof(name), stdin);\n    name[strcspn(name, "\\n")] = 0; // Remove newline\n    printf("Hello, %s!\\n", name);\n    \n    return 0;\n}'},Go:{id:60,name:"Go",extension:"go",monacoLanguage:"go",defaultCode:'// Go Code with full standard library support\npackage main\n\nimport (\n    "fmt"\n    "bufio"\n    "os"\n    "math/rand"\n    "time"\n    "math"\n    "crypto/md5"\n    "encoding/hex"\n)\n\nfunc main() {\n    fmt.Println("Hello, World!")\n    \n    // Your code here\n    reader := bufio.NewReader(os.Stdin)\n    fmt.Print("Enter your name: ")\n    name, _ := reader.ReadString(\'\\n\')\n    fmt.Printf("Hello, %s!", name)\n    \n    // Example with libraries\n    rand.Seed(time.Now().UnixNano())\n    fmt.Printf("Random number: %d\\n", rand.Intn(100))\n    fmt.Printf("Square root of 16: %.2f\\n", math.Sqrt(16))\n    fmt.Printf("Current time: %s\\n", time.Now().Format("2006-01-02 15:04:05"))\n    \n    // Hash example\n    hash := md5.Sum([]byte(name))\n    fmt.Printf("Hash of your name: %s\\n", hex.EncodeToString(hash[:]))\n}'},Ruby:{id:72,name:"Ruby",extension:"rb",monacoLanguage:"ruby",defaultCode:'# Ruby Code with full standard library support\nrequire \'digest\'\nrequire \'time\'\nrequire \'json\'\n\nputs "Hello, World!"\n\n# Your code here\nprint "Enter your name: "\nname = gets.chomp\nputs "Hello, #{name}!"\n\n# Example with libraries\nputs "Random number: #{rand(100)}"\nputs "Square root of 16: #{Math.sqrt(16)}"\nputs "Current time: #{Time.now}"\nputs "Hash of your name: #{Digest::MD5.hexdigest(name)}"\n\n# JSON example\ndata = { name: name, timestamp: Time.now.to_i }\nputs "JSON data: #{data.to_json}"'},PHP:{id:68,name:"PHP",extension:"php",monacoLanguage:"php",defaultCode:'<?php\n// PHP Code with full standard library support\necho "Hello, World!\\n";\n\n// Your code here\necho "Enter your name: ";\n$name = trim(fgets(STDIN));\necho "Hello, $name!\\n";\n\n// Example with libraries\necho "Random number: " . rand(1, 100) . "\\n";\necho "Square root of 16: " . sqrt(16) . "\\n";\necho "Current time: " . date(\'Y-m-d H:i:s\') . "\\n";\necho "Hash of your name: " . md5($name) . "\\n";\n\n// JSON example\n$data = array(\'name\' => $name, \'timestamp\' => time());\necho "JSON data: " . json_encode($data) . "\\n";\n?>'},Rust:{id:73,name:"Rust",extension:"rs",monacoLanguage:"rust",defaultCode:'// Rust Code with full standard library support\nuse std::io;\nuse std::time::{SystemTime, UNIX_EPOCH};\nuse std::collections::HashMap;\nuse rand::Rng;\n\nfn main() {\n    println!("Hello, World!");\n    \n    // Your code here\n    println!("Enter your name:");\n    let mut name = String::new();\n    io::stdin().read_line(&mut name).expect("Failed to read line");\n    println!("Hello, {}!", name.trim());\n    \n    // Example with libraries\n    let mut rng = rand::thread_rng();\n    println!("Random number: {}", rng.gen_range(1..=100));\n    println!("Square root of 16: {}", 16.0_f64.sqrt());\n    \n    let now = SystemTime::now()\n        .duration_since(UNIX_EPOCH)\n        .unwrap()\n        .as_secs();\n    println!("Current timestamp: {}", now);\n    \n    // HashMap example\n    let mut map = HashMap::new();\n    map.insert("name", name.trim());\n    map.insert("timestamp", &now.to_string());\n    println!("HashMap: {:?}", map);\n}'},Swift:{id:83,name:"Swift",extension:"swift",monacoLanguage:"swift",defaultCode:'// Swift Code with full Foundation support\nimport Foundation\n\nprint("Hello, World!")\n\n// Your code here\nprint("Enter your name:", terminator: " ")\nif let name = readLine() {\n    print("Hello, \\(name)!")\n    \n    // Example with libraries\n    let randomNumber = Int.random(in: 1...100)\n    print("Random number: \\(randomNumber)")\n    print("Square root of 16: \\(sqrt(16))")\n    print("Current time: \\(Date())")\n    \n    // Hash example\n    let data = name.data(using: .utf8)!\n    let hash = data.withUnsafeBytes { bytes in\n        return bytes.bindMemory(to: UInt8.self)\n    }\n    let hashString = hash.map { String(format: "%02x", $0) }.joined()\n    print("Hash of your name: \\(hashString)")\n    \n    // JSON example\n    let jsonData: [String: Any] = ["name": name, "timestamp": Date().timeIntervalSince1970]\n    if let json = try? JSONSerialization.data(withJSONObject: jsonData),\n       let jsonString = String(data: json, encoding: .utf8) {\n        print("JSON data: \\(jsonString)")\n    }\n}'},Kotlin:{id:78,name:"Kotlin",extension:"kt",monacoLanguage:"kotlin",defaultCode:'// Kotlin Code with full standard library support\nimport kotlin.random.Random\nimport kotlin.math.sqrt\nimport java.time.LocalDateTime\nimport java.security.MessageDigest\n\nfun main() {\n    println("Hello, World!")\n    \n    // Your code here\n    print("Enter your name: ")\n    val name = readLine()\n    println("Hello, $name!")\n    \n    // Example with libraries\n    println("Random number: ${Random.nextInt(1, 101)}")\n    println("Square root of 16: ${sqrt(16.0)}")\n    println("Current time: ${LocalDateTime.now()}")\n    \n    // Hash example\n    val bytes = name?.toByteArray() ?: byteArrayOf()\n    val md = MessageDigest.getInstance("MD5")\n    val digest = md.digest(bytes)\n    val hashString = digest.joinToString("") { "%02x".format(it) }\n    println("Hash of your name: $hashString")\n    \n    // Map example\n    val data = mapOf("name" to name, "timestamp" to System.currentTimeMillis())\n    println("Map data: $data")\n}'},TypeScript:{id:74,name:"TypeScript",extension:"ts",monacoLanguage:"typescript",defaultCode:"// TypeScript Code with full Node.js support\nconst fs = require('fs');\nconst path = require('path');\nconst crypto = require('crypto');\n\nconsole.log(\"Hello, World!\");\n\n// Your code here\nconst readline = require('readline');\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout\n});\n\nrl.question('Enter your name: ', (name: string) => {\n  console.log(`Hello, ${name}!`);\n  \n  // Example with libraries\n  console.log(`Random number: ${Math.floor(Math.random() * 100)}`);\n  console.log(`Square root of 16: ${Math.sqrt(16)}`);\n  console.log(`Current time: ${new Date()}`);\n  console.log(`Hash of your name: ${crypto.createHash('md5').update(name).digest('hex')}`);\n  \n  // TypeScript features\n  interface UserData {\n    name: string;\n    timestamp: number;\n  }\n  \n  const userData: UserData = {\n    name: name,\n    timestamp: Date.now()\n  };\n  \n  console.log(`User data: ${JSON.stringify(userData)}`);\n  \n  rl.close();\n});"},"C#":{id:51,name:"C#",extension:"cs",monacoLanguage:"csharp",defaultCode:'// C# Code with full .NET support\nusing System;\nusing System.Collections.Generic;\nusing System.Security.Cryptography;\nusing System.Text;\n\nclass Program\n{\n    static void Main()\n    {\n        Console.WriteLine("Hello, World!");\n        \n        // Your code here\n        Console.Write("Enter your name: ");\n        string name = Console.ReadLine();\n        Console.WriteLine($"Hello, {name}!");\n        \n        // Example with libraries\n        Random random = new Random();\n        Console.WriteLine($"Random number: {random.Next(1, 101)}");\n        Console.WriteLine($"Square root of 16: {Math.Sqrt(16)}");\n        Console.WriteLine($"Current time: {DateTime.Now}");\n        \n        // Hash example\n        using (MD5 md5 = MD5.Create())\n        {\n            byte[] inputBytes = Encoding.ASCII.GetBytes(name);\n            byte[] hashBytes = md5.ComputeHash(inputBytes);\n            string hash = BitConverter.ToString(hashBytes).Replace("-", "").ToLower();\n            Console.WriteLine($"Hash of your name: {hash}");\n        }\n        \n        // Dictionary example\n        var data = new Dictionary<string, object>\n        {\n            {"name", name},\n            {"timestamp", DateTimeOffset.Now.ToUnixTimeSeconds()}\n        };\n        Console.WriteLine($"Dictionary data: {string.Join(", ", data)}");\n    }\n}'},Scala:{id:81,name:"Scala",extension:"scala",monacoLanguage:"scala",defaultCode:'// Scala Code with full standard library support\nimport scala.util.Random\nimport scala.math.sqrt\nimport java.time.LocalDateTime\nimport java.security.MessageDigest\n\nobject Main {\n  def main(args: Array[String]): Unit = {\n    println("Hello, World!")\n    \n    // Your code here\n    print("Enter your name: ")\n    val name = scala.io.StdIn.readLine()\n    println(s"Hello, $name!")\n    \n    // Example with libraries\n    val random = new Random()\n    println(s"Random number: ${random.nextInt(100) + 1}")\n    println(s"Square root of 16: ${sqrt(16)}")\n    println(s"Current time: ${LocalDateTime.now()}")\n    \n    // Hash example\n    val md = MessageDigest.getInstance("MD5")\n    val hashBytes = md.digest(name.getBytes("UTF-8"))\n    val hashString = hashBytes.map("%02x".format(_)).mkString\n    println(s"Hash of your name: $hashString")\n    \n    // Map example\n    val data = Map("name" -> name, "timestamp" -> System.currentTimeMillis())\n    println(s"Map data: $data")\n  }\n}'},Perl:{id:85,name:"Perl",extension:"pl",monacoLanguage:"perl",defaultCode:'# Perl Code with full CPAN support\nuse strict;\nuse warnings;\nuse Digest::MD5 qw(md5_hex);\nuse Time::Piece;\nuse JSON;\n\nprint "Hello, World!\\n";\n\n# Your code here\nprint "Enter your name: ";\nmy $name = <STDIN>;\nchomp($name);\nprint "Hello, $name!\\n";\n\n# Example with libraries\nmy $random = int(rand(100)) + 1;\nprint "Random number: $random\\n";\nprint "Square root of 16: " . sqrt(16) . "\\n";\nprint "Current time: " . localtime() . "\\n";\n\n# Hash example\nmy $hash = md5_hex($name);\nprint "Hash of your name: $hash\\n";\n\n# JSON example\nmy $data = {\n    name => $name,\n    timestamp => time()\n};\nmy $json = encode_json($data);\nprint "JSON data: $json\\n";'},Haskell:{id:61,name:"Haskell",extension:"hs",monacoLanguage:"haskell",defaultCode:'-- Haskell Code with full standard library support\nimport System.Random\nimport Data.Time\nimport Data.Digest.Pure.MD5\nimport Data.ByteString.Lazy.Char8 (pack)\n\nmain :: IO ()\nmain = do\n    putStrLn "Hello, World!"\n    \n    -- Your code here\n    putStr "Enter your name: "\n    name <- getLine\n    putStrLn $ "Hello, " ++ name ++ "!"\n    \n    -- Example with libraries\n    gen <- newStdGen\n    let (random, _) = randomR (1, 100) gen\n    putStrLn $ "Random number: " ++ show random\n    putStrLn $ "Square root of 16: " ++ show (sqrt 16)\n    \n    now <- getCurrentTime\n    putStrLn $ "Current time: " ++ show now\n    \n    -- Hash example\n    let hash = md5 $ pack name\n    putStrLn $ "Hash of your name: " ++ show hash'}},je=e=>{const n=Ce[e];return n?n.defaultCode:""},Se=e=>{const n=Ce[e];return n?n.monacoLanguage:"plaintext"};const Ee=new class{constructor(){this.isExecuting=!1,this.currentExecution=null}async executeCode(e,n,t="",r=!0){if(this.isExecuting)throw new Error("Another execution is already in progress");this.isExecuting=!0,this.currentExecution={sourceCode:e,language:n,input:t,isFirstRun:r};try{const a=(e=>{const n=Ce[e];return n?n.id:null})(n);if(console.log("ExecutionService - Language:",n,"Language ID:",a),!a)throw new Error(`Unsupported language: ${n}`);if(this.detectInputRequirements(e,n)&&r){let n;console.log("Program needs input, running to show prompt");try{n=await we.executeCodeInteractive(e,a,"",!0)}catch(o){console.log("Primary Judge0 service failed, trying alternative..."),n=await be.executeCode(e,a,"")}return n.error&&(n.error.includes("EOFError")||n.error.includes("EOF"))?{success:!0,output:n.output||"Program is waiting for input.",error:"",needsInput:!0,isComplete:!1,executionId:this.generateExecutionId()}:n.output&&n.output.trim()?{success:!0,output:n.output,error:"",needsInput:!0,isComplete:!1,executionId:this.generateExecutionId()}:{success:n.success,output:n.output,error:n.error,needsInput:!1,isComplete:!0,executionId:this.generateExecutionId()}}{let n;console.log("Executing with input:",t);try{n=await we.executeCodeInteractive(e,a,t,!0)}catch(o){console.log("Primary Judge0 service failed, trying alternative..."),n=await be.executeCode(e,a,t)}return{success:n.success,output:n.output,error:n.error,needsInput:!1,isComplete:!0,executionId:this.generateExecutionId()}}}catch(o){return{success:!1,output:"",error:o.message,needsInput:!1,isComplete:!0,executionId:this.generateExecutionId()}}finally{this.isExecuting=!1,this.currentExecution=null}}detectInputRequirements(e,n){return({Python:["input(","raw_input(","sys.stdin","input()"],C:["scanf(","gets(","fgets(","getchar(","fgetc("],"C++":["cin >>","getline(","cin.get(","cin.getline(","cin.read("],Java:["Scanner","nextLine(","nextInt(","nextDouble(","nextFloat(","next()","System.in","BufferedReader"],JavaScript:["readline","prompt(","process.stdin","require('readline')"],Go:["fmt.Scan","fmt.Scanln","fmt.Scanf","bufio.Reader","bufio.Scanner","fmt.Print"],PHP:["fgets(","readline(","fscanf(","fgetc(","stream_get_line("],Ruby:["gets","gets.chomp","STDIN.gets","ARGF.gets"]}[n]||[]).some(n=>e.includes(n))}isWaitingForInput(e,n){const t=["Enter","Input","Type","Please",":","?",">>>",">>","$","calculate","factorial","number","enter your name","enter name","name:","input:","please enter","type your"].some(n=>e.toLowerCase().includes(n.toLowerCase()));if("Go"===n){if(["Enter a number","Enter","Input","Type","calculate","factorial","number"].some(n=>e.toLowerCase().includes(n.toLowerCase())))return!0}if("Python"===n){if(["enter your name","enter name","name:","input:","please enter","type your"].some(n=>e.toLowerCase().includes(n.toLowerCase())))return!0}const r=!e.trim();return t||r&&this.detectInputRequirements(e,n)}generateExecutionId(){return`exec_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}stopExecution(){this.isExecuting=!1,this.currentExecution=null}getExecutionStatus(){return{isExecuting:this.isExecuting,currentExecution:this.currentExecution}}};function _e({onBack:t}){const[o,a]=n.useState("Python"),[i,s]=n.useState(je("Python")),[l,u]=n.useState([]),[c,d]=n.useState(!1),[m,p]=n.useState(!1),[h,f]=n.useState(""),[g,y]=n.useState([]),[x,w]=n.useState([]),[v,b]=n.useState(-1),[C,j]=n.useState(!0),[S,E]=n.useState(14),_=n.useRef(null);n.useRef(null);const O=n.useRef(null);n.useEffect(()=>{_.current&&_.current.scrollIntoView({behavior:"smooth"})},[l]),n.useEffect(()=>{if(m){const e=document.querySelector('[tabindex="0"]');e&&e.focus()}},[m]),n.useEffect(()=>{let e;return m?e=setInterval(()=>{j(e=>!e)},500):j(!0),()=>{e&&clearInterval(e)}},[m]),n.useEffect(()=>{const e=e=>{if(m)if("Enter"===e.key){if(e.preventDefault(),h.trim()){w(e=>[...e,h]),b(-1);const e=[...g,h];y(e),u(e=>[...e,{type:"input",text:`>> ${h}`}]),f(""),p(!1);const n=e.join("\n");$(n)}}else if("ArrowUp"===e.key){if(e.preventDefault(),m&&x.length>0){const e=-1===v?x.length-1:Math.max(0,v-1);b(e),f(x[e])}}else if("ArrowDown"===e.key){if(e.preventDefault(),m){const e=v+1;e>=x.length?(b(-1),f("")):(b(e),f(x[e]))}}else"c"===e.key&&e.ctrlKey?(e.preventDefault(),p(!1),u(e=>[...e,{type:"prompt",text:"Execution stopped by user."}])):1===e.key.length?f(n=>n+e.key):"Backspace"===e.key&&f(e=>e.slice(0,-1))};return m&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[m,h,g,x,v]),n.useEffect(()=>{console.log("Selected language changed to:",o)},[o]);const k=()=>{const e=Math.min(S+2,32);E(e),O.current&&O.current.updateOptions({fontSize:e})},M=()=>{const e=Math.max(S-2,8);E(e),O.current&&O.current.updateOptions({fontSize:e})},N=()=>{E(14),O.current&&O.current.updateOptions({fontSize:14})},$=async(e="")=>{d(!0),u(e=>[...e,{type:"output",text:"⚡ Compiling and running..."}]);try{console.log("Executing code:",{language:o,codeLength:i.length,stdinLength:e.length,isFirstRun:""===e});const n=await Ee.executeCode(i,o,e,""===e);if(u(e=>e.filter(e=>!e.text.includes("Compiling"))),e){u(e=>[...e,{type:"prompt",text:"--- Input provided ---"}]);e.split("\n").forEach(e=>{u(n=>[...n,{type:"input",text:e}])}),u(e=>[...e,{type:"prompt",text:"--- Program output ---"}])}if(n.success&&n.output){n.output.trim().split("\n").forEach(e=>{e.trim()&&u(n=>[...n,{type:"output",text:e}])})}else n.error&&u(e=>[...e,{type:"error",text:n.error}]);n.needsInput?(p(!0),u(e=>[...e,{type:"prompt",text:"Program is waiting for input. Type your input and press Enter to execute."}])):n.success&&n.isComplete?p(!1):n.error&&n.error.includes("EOFError")&&(p(!0),u(e=>[...e,{type:"prompt",text:"Program is waiting for input. Type your input and press Enter to execute."}])),n.success&&n.isComplete?u(e=>[...e,{type:"prompt",text:"✓ Execution completed successfully"}]):n.success||u(e=>[...e,{type:"error",text:"Execution failed"}]),n.time&&u(e=>[...e,{type:"prompt",text:`⏱️  Time: ${n.time}s | Memory: ${n.memory||"N/A"} KB`}])}catch(n){console.error("Execution error:",n),u(e=>[...e.filter(e=>!e.text.includes("Compiling")),{type:"error",text:`❌ Error: ${n.message}`}])}finally{d(!1)}};return e.jsxs("div",{className:"h-screen flex flex-col bg-slate-950",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10 bg-slate-900/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[t&&e.jsxs(r,{variant:"ghost",size:"sm",onClick:t,className:"text-white/70 hover:text-white hover:bg-white/10",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsx(ce,{className:"w-6 h-6 text-purple-400"}),e.jsx("h1",{className:"text-white text-xl",children:"Interactive Code Playground"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(r,{onClick:()=>{u([]),y([]);e=i,[/scanf\s*\(/i,/cin\s*>>/i,/input\s*\(/i,/readLine\s*\(/i,/Scanner/i,/readline\.question/i].some(n=>n.test(e));var e;$()},disabled:c,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white",children:c?e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-4 h-4 mr-2 animate-spin"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Run Code"]})})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"flex-1 border-r border-white/10 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10 bg-slate-800/50",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(he,{value:o,onValueChange:e=>{console.log("Language changed to:",e),console.log("Current selectedLanguage before change:",o),a(e),s(je(e)),u([]),y([])},children:[e.jsx(fe,{className:"w-[180px] bg-slate-700 border-slate-600 text-white",children:e.jsx(xe,{value:o,placeholder:"Select Language"})}),e.jsx(ge,{children:Object.keys(Ce).map(n=>e.jsx(ye,{value:n,children:n},n))})]})}),e.jsxs("div",{className:"flex items-center gap-1 bg-slate-700 rounded-lg p-1",children:[e.jsx(r,{onClick:M,size:"sm",className:"bg-transparent hover:bg-slate-600 text-white p-2",title:"Zoom Out (Ctrl+- or Ctrl+M or Ctrl+Scroll Down)",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-white/70 text-sm px-2 min-w-[3rem] text-center",children:[S,"px"]}),e.jsx(r,{onClick:k,size:"sm",className:"bg-transparent hover:bg-slate-600 text-white p-2",title:"Zoom In (Ctrl++ or Ctrl+P or Ctrl+Scroll Up)",children:e.jsx(me,{className:"w-4 h-4"})}),e.jsx(r,{onClick:N,size:"sm",className:"bg-transparent hover:bg-slate-600 text-white p-2",title:"Reset Zoom (Ctrl+0)",children:e.jsx(de,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex-1",children:e.jsx(ee,{height:"100%",language:Se(o),value:i,onChange:e=>s(e||""),onMount:e=>{O.current=e,e.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.Equal,()=>{k()}),e.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.Minus,()=>{M()}),e.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.Digit0,()=>{N()}),e.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyP,()=>{k()}),e.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyM,()=>{M()}),e.onMouseWheel(e=>{(e.ctrlKey||e.metaKey)&&(e.preventDefault(),e.stopPropagation(),e.deltaY<0?k():M())});const n=e.getDomNode();n&&n.addEventListener("keydown",e=>{!e.ctrlKey&&!e.metaKey||"+"!==e.key&&"="!==e.key&&"-"!==e.key||(e.preventDefault(),e.stopPropagation())},!0)},theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:S,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on"}})})]}),e.jsxs("div",{className:"w-[500px] flex flex-col bg-gray-900",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-700 bg-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"ml-2 text-gray-400 text-sm",children:"Terminal"})]}),e.jsx("button",{onClick:()=>{u([]),y([]),p(!1),f("")},className:"text-gray-400 hover:text-white text-xs px-2 py-1 rounded hover:bg-gray-700 transition-colors",children:"Clear"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 font-mono text-sm focus:outline-none bg-gray-900 text-green-400",style:{fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace'},tabIndex:0,onFocus:()=>{m&&console.log("Console area focused for input")},children:[0===l.length&&e.jsx("div",{className:"text-gray-500 text-center py-8",children:'No output yet. Write your code and click "Run Code" to execute.'}),l.map((n,t)=>e.jsx("div",{className:"mb-1 "+("error"===n.type?"text-red-400":"input"===n.type?"text-blue-400":"prompt"===n.type?"text-yellow-400":"text-green-400"),children:n.text},t)),m&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-green-300 font-mono",children:">>"}),e.jsxs("span",{className:"text-green-400 font-mono",children:[h||"Waiting for input... (Type and press Enter)",e.jsx("span",{className:`ml-1 ${C?"opacity-100":"opacity-0"} transition-opacity duration-100`,children:"█"})]})]}),e.jsx("div",{ref:_})]})]})]})]})}function Oe(){return e.jsx("div",{className:"h-screen",children:e.jsx(_e,{onBack:()=>{window.history.back()}})})}export{Oe as default};
